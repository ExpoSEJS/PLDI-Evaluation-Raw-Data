{"8":[13,13,13,47],"9":[1,20,1,27],"10":[13,13,13,32],"16":[23,16,23,29],"17":[1,28,1,32],"18":[13,13,13,47],"24":[24,15,24,47],"25":[1,20,1,33],"26":[19,12,19,54],"32":[24,15,24,64],"33":[1,20,1,33],"34":[19,12,19,67],"40":[30,13,30,37],"41":[1,20,1,33],"42":[19,12,19,96],"48":[30,13,30,37],"49":[2,26,2,38],"50":[19,12,19,123],"56":[36,17,36,37],"57":[2,26,2,45],"58":[19,12,19,137],"64":[39,17,39,37],"65":[2,26,2,45],"66":[19,12,19,150],"72":[34,13,34,16],"73":[2,26,2,45],"74":[19,12,19,160],"80":[48,13,48,27],"81":[3,1,3,13],"82":[19,12,19,167],"88":[48,13,48,27],"89":[3,1,3,14],"90":[19,12,19,180],"96":[51,13,51,29],"97":[4,13,4,20],"98":[19,12,19,194],"104":[60,9,60,56],"105":[4,21,4,28],"106":[19,12,19,208],"112":[60,9,60,56],"113":[4,13,4,29],"114":[30,13,30,17],"120":[65,21,65,36],"121":[4,30,4,44],"122":[36,17,36,37],"128":[75,13,75,55],"129":[4,13,4,45],"130":[39,17,39,37],"136":[75,13,75,55],"137":[4,13,4,45],"138":[45,19,45,41],"144":[73,9,73,29],"145":[4,13,4,45],"146":[45,19,45,47],"152":[79,12,79,35],"153":[5,17,5,24],"154":[45,19,45,92],"160":[82,9,82,60],"161":[5,25,5,36],"162":[60,9,60,21],"168":[82,9,82,80],"169":[5,17,5,37],"170":[60,25,60,43],"176":[82,9,82,80],"177":[5,17,5,37],"178":[60,25,60,56],"184":[85,9,85,68],"185":[5,17,5,37],"186":[65,21,65,36],"192":[85,9,85,92],"193":[6,18,6,25],"194":[65,38,65,41],"200":[85,9,85,92],"201":[6,26,6,39],"208":[92,9,92,51],"209":[6,18,6,40],"210":[65,38,65,41],"216":[92,9,92,67],"217":[6,18,6,40],"218":[73,9,73,29],"224":[92,9,92,67],"225":[6,18,6,40],"226":[75,13,75,17],"232":[98,12,98,48],"233":[7,18,7,25],"234":[75,21,75,40],"240":[110,13,110,34],"241":[7,26,7,39],"242":[75,21,75,55],"248":[116,9,116,24],"249":[7,18,7,40],"250":[82,9,82,26],"256":[125,9,125,17],"257":[7,18,7,40],"258":[82,9,82,39],"264":[129,21,129,36],"265":[7,18,7,40],"266":[82,43,82,60],"273":[8,16,8,23],"274":[82,64,82,80],"281":[8,24,8,34],"282":[85,9,85,30],"289":[8,16,8,35],"290":[85,9,85,43],"297":[8,16,8,35],"298":[85,47,85,68],"305":[8,16,8,35],"306":[85,72,85,92],"313":[9,16,9,23],"314":[92,9,92,22],"321":[9,24,9,34],"322":[92,9,92,35],"329":[9,16,9,35],"330":[92,39,92,51],"337":[9,16,9,35],"338":[92,55,92,67],"345":[9,16,9,35],"346":[98,12,98,34],"353":[10,14,10,21],"354":[98,12,98,48],"361":[10,22,10,30],"362":[110,13,110,34],"369":[10,14,10,31],"370":[125,9,125,17],"377":[10,14,10,31],"378":[129,21,129,36],"385":[10,14,10,31],"386":[129,38,129,41],"393":[11,27,11,37],"401":[11,27,11,37],"402":[129,38,129,41],"409":[11,27,11,37],"417":[12,22,12,27],"425":[12,22,12,27],"433":[12,22,12,27],"441":[13,20,13,32],"449":[13,37,13,47],"457":[13,50,13,62],"465":[14,5,14,12],"473":[14,22,14,24],"481":[14,22,14,29],"489":[14,36,14,38],"497":[14,40,14,49],"505":[14,22,14,50],"507":[14,22,14,35],"513":[14,5,14,51],"515":[14,5,14,21],"521":[14,5,14,52],"529":[13,65,15,2],"537":[13,65,15,2],"545":[13,65,15,2],"553":[13,65,15,2],"561":[13,13,15,2],"569":[13,13,15,2],"577":[16,18,16,28],"585":[16,18,16,39],"593":[16,18,16,39],"601":[16,18,16,39],"609":[18,16,18,26],"617":[18,27,18,34],"625":[18,16,18,35],"633":[18,44,18,58],"641":[18,60,18,66],"649":[18,16,18,67],"651":[18,16,18,43],"657":[18,76,18,95],"665":[18,97,18,106],"673":[18,16,18,107],"675":[18,16,18,75],"681":[18,16,18,107],"689":[18,16,18,107],"697":[19,12,19,31],"705":[19,34,19,54],"713":[19,57,19,67],"721":[19,70,19,96],"729":[19,99,19,123],"737":[19,126,19,137],"745":[19,140,19,150],"753":[19,153,19,160],"761":[19,163,19,167],"769":[19,170,19,180],"777":[19,183,19,194],"785":[19,197,19,208],"793":[19,12,19,208],"801":[19,5,19,209],"809":[17,1,20,2],"817":[17,1,20,2],"825":[17,1,20,2],"833":[17,1,20,2],"841":[21,1,21,7],"849":[21,18,21,30],"857":[21,1,21,30],"865":[21,1,21,31],"873":[23,16,23,23],"881":[23,27,23,29],"889":[23,16,23,29],"897":[23,16,23,29],"905":[24,15,24,19],"913":[24,15,24,23],"921":[24,27,24,34],"929":[24,27,24,38],"937":[24,27,24,47],"945":[24,51,24,64],"953":[24,15,24,64],"961":[24,15,24,64],"969":[25,19,25,23],"977":[25,19,25,31],"985":[25,19,25,31],"993":[25,19,25,31],"1001":[30,14,30,17],"1009":[30,21,30,32],"1017":[30,33,30,36],"1025":[30,21,30,37],"1033":[31,13,31,18],"1041":[31,19,31,50],"1049":[31,13,31,51],"1057":[31,13,31,52],"1065":[32,13,32,20],"1073":[32,13,32,20],"1081":[34,13,34,16],"1089":[35,22,35,40],"1097":[35,41,35,44],"1105":[35,22,35,45],"1113":[35,22,35,45],"1121":[35,13,35,46],"1129":[36,17,36,23],"1137":[36,28,36,37],"1145":[37,27,37,42],"1153":[37,43,37,46],"1161":[37,27,37,47],"1169":[37,27,37,47],"1177":[37,17,37,48],"1185":[39,17,39,23],"1193":[39,28,39,37],"1201":[40,26,40,47],"1209":[40,48,40,51],"1217":[40,26,40,52],"1225":[40,26,40,52],"1233":[40,17,40,53],"1241":[42,19,42,34],"1249":[42,35,42,38],"1257":[42,40,42,46],"1265":[42,48,42,51],"1273":[42,19,42,52],"1281":[42,19,42,52],"1289":[42,13,42,53],"1297":[44,22,44,25],"1305":[44,22,44,25],"1313":[44,13,44,26],"1321":[45,19,45,28],"1329":[45,31,45,34],"1337":[45,31,45,41],"1345":[45,44,45,47],"1353":[45,50,45,59],"1361":[45,60,45,68],"1369":[45,78,45,81],"1377":[45,60,45,82],"1379":[45,60,45,77],"1385":[45,60,45,91],"1393":[45,50,45,92],"1401":[45,19,45,92],"1409":[45,13,45,93],"1417":[47,9,47,14],"1425":[47,15,47,27],"1433":[47,29,47,35],"1441":[47,9,47,36],"1449":[47,9,47,37],"1457":[48,13,48,16],"1465":[48,20,48,27],"1473":[49,13,49,18],"1481":[49,19,49,26],"1489":[49,28,49,31],"1497":[49,33,49,36],"1505":[49,38,49,41],"1513":[49,13,49,42],"1521":[49,13,49,43],"1529":[51,13,51,24],"1537":[51,25,51,28],"1545":[51,13,51,29],"1553":[52,13,52,18],"1561":[52,19,52,49],"1569":[52,51,52,57],"1577":[52,13,52,58],"1585":[52,13,52,59],"1593":[53,13,53,16],"1601":[53,13,53,23],"1609":[53,13,53,33],"1611":[53,13,53,31],"1617":[53,13,53,34],"1625":[54,13,54,20],"1633":[54,13,54,20],"1641":[56,9,56,13],"1649":[56,14,56,17],"1657":[56,19,56,22],"1665":[56,24,56,30],"1673":[56,32,56,39],"1681":[56,41,56,44],"1689":[56,9,56,45],"1697":[56,9,56,46],"1705":[26,12,57,6],"1713":[26,12,57,6],"1721":[26,12,57,6],"1729":[26,12,57,6],"1737":[26,12,57,6],"1745":[26,12,57,6],"1753":[26,12,57,6],"1761":[26,12,57,6],"1769":[26,5,57,7],"1777":[22,1,58,2],"1785":[22,1,58,2],"1793":[22,1,58,2],"1801":[22,1,58,2],"1809":[22,1,58,2],"1817":[22,1,58,2],"1825":[22,1,58,2],"1833":[22,1,58,2],"1841":[60,10,60,13],"1849":[60,10,60,21],"1857":[60,32,60,35],"1865":[60,32,60,43],"1873":[60,48,60,56],"1881":[61,16,61,25],"1889":[61,16,61,25],"1897":[61,9,61,26],"1905":[63,19,63,25],"1913":[63,33,63,37],"1921":[63,19,63,38],"1923":[63,19,63,32],"1929":[63,19,63,38],"1937":[63,19,63,38],"1945":[64,16,64,22],"1953":[64,28,64,31],"1961":[64,28,64,39],"1969":[64,16,64,40],"1971":[64,16,64,27],"1977":[64,16,64,40],"1985":[64,16,64,40],"1993":[65,18,65,19],"2001":[65,18,65,19],"2009":[65,18,65,19],"2017":[65,21,65,22],"2025":[65,25,65,29],"2033":[65,25,65,36],"2049":[65,38,65,39],"2057":[65,38,65,41],"2073":[66,19,66,23],"2081":[66,24,66,25],"2089":[66,19,66,26],"2097":[66,19,66,26],"2105":[66,19,66,26],"2113":[67,9,67,16],"2121":[67,17,67,20],"2129":[67,24,67,27],"2137":[67,24,67,35],"2145":[67,36,67,39],"2153":[67,24,67,40],"2161":[67,9,67,40],"2169":[67,9,67,41],"2177":[69,12,69,19],"2185":[69,12,69,19],"2193":[69,5,69,20],"2201":[59,1,70,2],"2209":[59,1,70,2],"2217":[59,1,70,2],"2225":[59,1,70,2],"2233":[59,1,70,2],"2241":[59,1,70,2],"2249":[59,1,70,2],"2257":[73,9,73,12],"2265":[73,17,73,29],"2273":[74,15,74,18],"2281":[74,15,74,24],"2289":[74,15,74,24],"2297":[74,9,74,25],"2305":[75,14,75,17],"2313":[75,28,75,31],"2321":[75,28,75,40],"2329":[75,45,75,55],"2337":[76,19,76,22],"2345":[76,19,76,33],"2347":[76,19,76,31],"2353":[76,19,76,33],"2361":[76,13,76,34],"2369":[79,12,79,15],"2377":[79,19,79,27],"2385":[79,28,79,34],"2393":[79,19,79,35],"2401":[79,12,79,35],"2409":[79,5,79,36],"2417":[71,1,80,2],"2425":[71,1,80,2],"2433":[71,1,80,2],"2441":[71,1,80,2],"2449":[71,1,80,2],"2457":[71,1,80,2],"2465":[82,16,82,19],"2473":[82,16,82,26],"2481":[82,31,82,39],"2489":[82,43,82,46],"2497":[82,43,82,53],"2505":[82,57,82,60],"2513":[82,64,82,67],"2521":[82,64,82,74],"2529":[82,77,82,80],"2537":[83,16,83,19],"2545":[83,16,83,26],"2553":[83,16,83,26],"2561":[83,9,83,27],"2569":[85,16,85,19],"2577":[85,16,85,30],"2585":[85,35,85,43],"2593":[85,47,85,50],"2601":[85,47,85,61],"2609":[85,65,85,68],"2617":[85,72,85,75],"2625":[85,72,85,86],"2633":[85,89,85,92],"2641":[86,16,86,19],"2649":[86,16,86,30],"2657":[86,16,86,30],"2665":[86,9,86,31],"2673":[88,12,88,21],"2681":[88,12,88,21],"2689":[88,5,88,22],"2697":[81,1,89,2],"2705":[81,1,89,2],"2713":[81,1,89,2],"2721":[91,18,91,21],"2729":[91,18,91,32],"2737":[91,18,91,32],"2745":[91,18,91,32],"2753":[92,16,92,22],"2761":[92,27,92,35],"2769":[92,39,92,45],"2777":[92,48,92,51],"2785":[92,55,92,61],"2793":[92,64,92,67],"2801":[93,18,93,21],"2809":[93,18,93,21],"2817":[93,9,93,22],"2825":[95,12,95,18],"2833":[95,12,95,18],"2841":[95,5,95,19],"2849":[90,1,96,2],"2857":[90,1,96,2],"2865":[90,1,96,2],"2873":[90,1,96,2],"2881":[98,19,98,22],"2889":[98,19,98,34],"2897":[98,39,98,48],"2905":[98,51,98,58],"2913":[98,59,98,62],"2921":[98,59,98,70],"2929":[98,51,98,71],"2937":[98,74,98,77],"2945":[98,74,98,89],"2953":[98,12,98,89],"2961":[98,5,98,90],"2969":[97,1,99,2],"2977":[97,1,99,2],"2985":[97,1,99,2],"2993":[102,20,102,38],"3001":[102,39,102,46],"3009":[102,20,102,47],"3017":[102,20,102,47],"3025":[102,20,102,47],"3033":[103,9,103,12],"3041":[103,26,103,32],"3049":[103,9,103,32],"3057":[103,9,103,33],"3065":[104,9,104,12],"3073":[104,29,104,37],"3081":[104,38,104,44],"3089":[104,29,104,45],"3097":[104,9,104,45],"3105":[104,9,104,46],"3113":[105,9,105,19],"3121":[105,20,105,23],"3129":[105,25,105,32],"3137":[105,9,105,33],"3145":[105,9,105,34],"3153":[106,9,106,12],"3161":[106,23,106,48],"3169":[106,50,106,72],"3177":[106,9,106,73],"3179":[106,9,106,22],"3185":[106,9,106,74],"3193":[107,9,107,12],"3201":[107,23,107,47],"3209":[107,49,107,58],"3217":[107,9,107,59],"3219":[107,9,107,22],"3225":[107,9,107,60],"3233":[108,9,108,12],"3241":[108,23,108,37],"3249":[108,39,108,65],"3257":[108,9,108,66],"3259":[108,9,108,22],"3265":[108,9,108,67],"3273":[109,9,109,12],"3281":[109,23,109,39],"3289":[109,41,109,47],"3297":[109,59,109,63],"3305":[109,65,109,71],"3313":[109,41,109,72],"3315":[109,41,109,58],"3321":[109,9,109,73],"3323":[109,9,109,22],"3329":[109,9,109,74],"3337":[110,13,110,16],"3345":[110,13,110,23],"3353":[110,28,110,34],"3361":[111,13,111,16],"3369":[111,13,111,22],"3371":[111,13,111,20],"3377":[111,13,111,23],"3385":[112,13,112,20],"3393":[112,13,112,20],"3401":[114,9,114,12],"3409":[114,17,114,21],"3417":[114,23,114,29],"3425":[114,9,114,30],"3427":[114,9,114,16],"3433":[114,9,114,31],"3441":[101,5,115,6],"3449":[101,5,115,6],"3457":[101,5,115,6],"3465":[116,9,116,19],"3473":[116,20,116,23],"3481":[116,9,116,24],"3489":[117,9,117,14],"3497":[117,9,117,16],"3505":[117,9,117,17],"3513":[118,9,118,16],"3521":[118,9,118,16],"3529":[120,5,120,11],"3537":[120,12,120,15],"3545":[120,5,120,16],"3553":[120,5,120,17],"3561":[121,5,121,15],"3569":[121,16,121,19],"3577":[121,21,121,26],"3585":[121,5,121,27],"3593":[121,5,121,28],"3601":[122,5,122,8],"3609":[122,5,122,17],"3611":[122,5,122,15],"3617":[122,5,122,18],"3625":[100,1,123,2],"3633":[100,1,123,2],"3641":[100,1,123,2],"3649":[100,1,123,2],"3657":[100,1,123,2],"3665":[100,1,123,2],"3673":[100,1,123,2],"3681":[101,5,115,6],"3689":[100,1,123,2],"3697":[125,10,125,17],"3705":[126,9,126,16],"3713":[126,9,126,16],"3721":[128,16,128,22],"3729":[128,28,128,35],"3737":[128,16,128,36],"3739":[128,16,128,27],"3745":[128,16,128,36],"3753":[128,16,128,36],"3761":[129,18,129,19],"3769":[129,18,129,19],"3777":[129,18,129,19],"3785":[129,21,129,22],"3793":[129,25,129,29],"3801":[129,25,129,36],"3817":[129,38,129,39],"3825":[129,38,129,41],"3841":[130,19,130,23],"3849":[130,24,130,25],"3857":[130,19,130,26],"3865":[130,19,130,26],"3873":[130,19,130,26],"3881":[131,9,131,12],"3889":[131,23,131,26],"3897":[131,28,131,35],"3905":[131,36,131,39],"3913":[131,28,131,40],"3921":[131,9,131,41],"3923":[131,9,131,22],"3929":[131,9,131,42],"3937":[124,1,133,2],"3945":[124,1,133,2],"3953":[124,1,133,2],"3961":[124,1,133,2],"3969":[124,1,133,2],"3977":[124,1,133,2],"3985":[124,1,133,2],"3993":[1,1,133,2],"4001":[1,1,133,2],"4009":[1,1,133,2],"4017":[1,1,133,2],"4025":[1,1,133,2],"4033":[1,1,133,2],"4041":[1,1,133,2],"4049":[1,1,133,2],"4057":[1,1,133,2],"4065":[1,1,133,2],"4073":[1,1,133,2],"4081":[1,1,133,2],"4089":[1,1,133,2],"4097":[1,1,133,2],"4105":[17,1,20,2],"4113":[1,1,133,2],"4121":[22,1,58,2],"4129":[1,1,133,2],"4137":[59,1,70,2],"4145":[1,1,133,2],"4153":[71,1,80,2],"4161":[1,1,133,2],"4169":[81,1,89,2],"4177":[1,1,133,2],"4185":[90,1,96,2],"4193":[1,1,133,2],"4201":[97,1,99,2],"4209":[1,1,133,2],"4217":[100,1,123,2],"4225":[1,1,133,2],"4233":[124,1,133,2],"4241":[1,1,133,2],"4249":[13,65,15,2],"4257":[13,65,15,2],"4265":[13,13,15,2],"4273":[17,1,20,2],"4281":[17,1,20,2],"4289":[30,9,33,10],"4297":[36,13,38,14],"4305":[39,13,41,14],"4313":[34,9,46,10],"4321":[48,9,50,10],"4329":[51,9,55,10],"4337":[26,12,57,6],"4345":[26,12,57,6],"4353":[22,1,58,2],"4361":[22,1,58,2],"4369":[60,5,62,6],"4377":[65,5,68,6],"4385":[65,5,68,6],"4393":[59,1,70,2],"4401":[59,1,70,2],"4409":[75,9,77,10],"4417":[73,5,78,6],"4425":[71,1,80,2],"4433":[71,1,80,2],"4441":[82,5,84,6],"4449":[85,5,87,6],"4457":[81,1,89,2],"4465":[81,1,89,2],"4473":[92,5,94,6],"4481":[90,1,96,2],"4489":[90,1,96,2],"4497":[98,12,98,89],"4505":[97,1,99,2],"4513":[97,1,99,2],"4521":[110,9,113,10],"4529":[101,5,115,6],"4537":[101,5,115,6],"4545":[116,5,119,6],"4553":[100,1,123,2],"4561":[100,1,123,2],"4569":[125,5,127,6],"4577":[129,5,132,6],"4585":[129,5,132,6],"4593":[124,1,133,2],"4601":[124,1,133,2],"4609":[1,1,133,2],"4617":[1,1,133,2],"nBranches":66,"originalCodeFileName":"/home/blake/ExpoSE/Targets/liftie/node_modules/finalhandler/index.js","instrumentedCodeFileName":"/home/blake/ExpoSE/Targets/liftie/node_modules/finalhandler/index_jalangi_.js","code":"/*!\n * finalhandler\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('finalhandler')\nvar encodeUrl = require('encodeurl')\nvar escapeHtml = require('escape-html')\nvar onFinished = require('on-finished')\nvar parseUrl = require('parseurl')\nvar statuses = require('statuses')\nvar unpipe = require('unpipe')\n\n/**\n * Module variables.\n * @private\n */\n\nvar DOUBLE_SPACE_REGEXP = /\\x20{2}/g\nvar NEWLINE_REGEXP = /\\n/g\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function (fn) { process.nextTick(fn.bind.apply(fn, arguments)) }\nvar isFinished = onFinished.isFinished\n\n/**\n * Create a minimal HTML document.\n *\n * @param {string} message\n * @private\n */\n\nfunction createHtmlDocument (message) {\n  var body = escapeHtml(message)\n    .replace(NEWLINE_REGEXP, '<br>')\n    .replace(DOUBLE_SPACE_REGEXP, ' &nbsp;')\n\n  return '<!DOCTYPE html>\\n' +\n    '<html lang=\"en\">\\n' +\n    '<head>\\n' +\n    '<meta charset=\"utf-8\">\\n' +\n    '<title>Error</title>\\n' +\n    '</head>\\n' +\n    '<body>\\n' +\n    '<pre>' + body + '</pre>\\n' +\n    '</body>\\n' +\n    '</html>\\n'\n}\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = finalhandler\n\n/**\n * Create a function to handle the final response.\n *\n * @param {Request} req\n * @param {Response} res\n * @param {Object} [options]\n * @return {Function}\n * @public\n */\n\nfunction finalhandler (req, res, options) {\n  var opts = options || {}\n\n  // get environment\n  var env = opts.env || process.env.NODE_ENV || 'development'\n\n  // get error callback\n  var onerror = opts.onerror\n\n  return function (err) {\n    var headers\n    var msg\n    var status\n\n    // ignore 404 on in-flight response\n    if (!err && headersSent(res)) {\n      debug('cannot 404 after headers sent')\n      return\n    }\n\n    // unhandled error\n    if (err) {\n      // respect status code from error\n      status = getErrorStatusCode(err)\n\n      // respect headers from error\n      if (status !== undefined) {\n        headers = getErrorHeaders(err)\n      }\n\n      // fallback to status code on response\n      if (status === undefined) {\n        status = getResponseStatusCode(res)\n      }\n\n      // get error message\n      msg = getErrorMessage(err, status, env)\n    } else {\n      // not found\n      status = 404\n      msg = 'Cannot ' + req.method + ' ' + encodeUrl(parseUrl.original(req).pathname)\n    }\n\n    debug('default %s', status)\n\n    // schedule onerror callback\n    if (err && onerror) {\n      defer(onerror, err, req, res)\n    }\n\n    // cannot actually respond\n    if (headersSent(res)) {\n      debug('cannot %d after headers sent', status)\n      req.socket.destroy()\n      return\n    }\n\n    // send response\n    send(req, res, status, headers, msg)\n  }\n}\n\n/**\n * Get headers from Error object.\n *\n * @param {Error} err\n * @return {object}\n * @private\n */\n\nfunction getErrorHeaders (err) {\n  if (!err.headers || typeof err.headers !== 'object') {\n    return undefined\n  }\n\n  var headers = Object.create(null)\n  var keys = Object.keys(err.headers)\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    headers[key] = err.headers[key]\n  }\n\n  return headers\n}\n\n/**\n * Get message from Error object, fallback to status message.\n *\n * @param {Error} err\n * @param {number} status\n * @param {string} env\n * @return {string}\n * @private\n */\n\nfunction getErrorMessage (err, status, env) {\n  var msg\n\n  if (env !== 'production') {\n    // use err.stack, which typically includes err.message\n    msg = err.stack\n\n    // fallback to err.toString() when possible\n    if (!msg && typeof err.toString === 'function') {\n      msg = err.toString()\n    }\n  }\n\n  return msg || statuses[status]\n}\n\n/**\n * Get status code from Error object.\n *\n * @param {Error} err\n * @return {number}\n * @private\n */\n\nfunction getErrorStatusCode (err) {\n  // check err.status\n  if (typeof err.status === 'number' && err.status >= 400 && err.status < 600) {\n    return err.status\n  }\n\n  // check err.statusCode\n  if (typeof err.statusCode === 'number' && err.statusCode >= 400 && err.statusCode < 600) {\n    return err.statusCode\n  }\n\n  return undefined\n}\n\n/**\n * Get status code from response.\n *\n * @param {OutgoingMessage} res\n * @return {number}\n * @private\n */\n\nfunction getResponseStatusCode (res) {\n  var status = res.statusCode\n\n  // default status code to 500 if outside valid range\n  if (typeof status !== 'number' || status < 400 || status > 599) {\n    status = 500\n  }\n\n  return status\n}\n\n/**\n * Determine if the response headers have been sent.\n *\n * @param {object} res\n * @returns {boolean}\n * @private\n */\n\nfunction headersSent (res) {\n  return typeof res.headersSent !== 'boolean'\n    ? Boolean(res._header)\n    : res.headersSent\n}\n\n/**\n * Send response.\n *\n * @param {IncomingMessage} req\n * @param {OutgoingMessage} res\n * @param {number} status\n * @param {object} headers\n * @param {string} message\n * @private\n */\n\nfunction send (req, res, status, headers, message) {\n  function write () {\n    // response body\n    var body = createHtmlDocument(message)\n\n    // response status\n    res.statusCode = status\n    res.statusMessage = statuses[status]\n\n    // response headers\n    setHeaders(res, headers)\n\n    // security headers\n    res.setHeader('Content-Security-Policy', \"default-src 'self'\")\n    res.setHeader('X-Content-Type-Options', 'nosniff')\n\n    // standard headers\n    res.setHeader('Content-Type', 'text/html; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(body, 'utf8'))\n\n    if (req.method === 'HEAD') {\n      res.end()\n      return\n    }\n\n    res.end(body, 'utf8')\n  }\n\n  if (isFinished(req)) {\n    write()\n    return\n  }\n\n  // unpipe everything from the request\n  unpipe(req)\n\n  // flush the request\n  onFinished(req, write)\n  req.resume()\n}\n\n/**\n * Set response headers from an object.\n *\n * @param {OutgoingMessage} res\n * @param {object} headers\n * @private\n */\n\nfunction setHeaders (res, headers) {\n  if (!headers) {\n    return\n  }\n\n  var keys = Object.keys(headers)\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    res.setHeader(key, headers[key])\n  }\n}\n"}