class Tiny.Store.RESTDriver
	constructor: (@apiURL) ->
		@apiURL = @apiURL.replace(/\/$/, '') + '/'

	find: (type, id, data, callback) ->
		data = data.join('/')
		url = @apiURL + type + '/' + id + '/' + data
		url = url.replace(/\/$/, '')

		console.log url

		$.get(url, callback)

	fetch: (type, page, data, callback) ->
		data = data.join('/')
		url = @apiURL + type + '/page/' + page + '/' + data
		url = url.replace(/\/$/, '')
		console.log url

		$.get(url, (response) =>
			callback response.records
		)

	save: (type, attributes, callback) ->
		$.post(@apiURL + type, attributes, (response) =>
			callback response.id
		)

	destroy: (type, id, callback) ->
		$.get(@apiURL + type + '/delete/' + id, (response) =>
			callback response.success
		)

	get: (path, callback) ->
		$.get(@apiURL + path, callback);

	post: (path, data, callback) ->
		$.post(@apiURL + path, data, callback);