# Load media files from production server if they don't exist locally
# http://stevegrunwell.github.io/wordpress-git/#/13
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule wp-content/uploads/(.*) \
  http://YOURSITE.com/wp-content/uploads/$1 [NC,L]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /dist/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /dist/index.php [L]

</IfModule>
# END WordPress

## SECURITY UPGRADES
  <IfModule mod_headers.c>
    Header set Content-Security-Policy "default-src 'self'; frame-src 'self data: http: https: *.disqus.com; img-src 'self' data: http: https: *.gravatar.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' http: https: *.googleapis.com; style-src 'self' 'unsafe-inline' http: https: fonts.googleapis.com; font-src 'self' data: http: https: fonts.googleapis.com themes.googleusercontent.com; "

    Header always set X-FRAME-OPTIONS "sameorigin"

    # Header always set X-Content-Type-Options "nosniff"

    Header always set X-XSS-Protection "1; mode=block"
  </IfModule>
## END SECURITY

## WEBP Support
  <IfModule mod_rewrite.c>
    RewriteEngine On
    # check if browser accepts webp
    RewriteCond %{HTTP_ACCEPT} image/webp

    # check if file is jpg or png
    RewriteCond %{REQUEST_FILENAME} (.*)\.(jpe?g|png)$
    
    # check if corresponding webp file exists image.png -> image.webp
    RewriteCond %1\.webp -f

    # serve up webp instead
    RewriteRule (.+)\.(jpe?g|png)$ $1.webp [T=image/webp,E=accept:1]
  </IfModule>

  <IfModule mod_headers.c>
    Header append Vary Accept env=REDIRECT_accept
  </IfModule>

  
## END WEBP SUPPORT

## SET CONTENT HEADER

  # WEBP
  AddType image/webp .webp

  # PNG
  AddType image/png .png

  # JPG
  AddType image/jpg .jpg

  # CSS
  AddType text/css .css

  # XHTML
  AddType application/xhtml+xml .xhtml

  # XML
  AddType text/xml .xml

  # SVG
  AddType image/svg+xml .svg .svgz
  AddEncoding x-gzip .svgz

  # HTML
  # Server Side Includes (SSI)
  AddType text/html .shtml

  # Active Server Pages
  AddType text/html .asp

  # Favicons
  AddType image/vnd.microsoft.icon .ico

  # Adobe PDF
  AddType application/pdf .pdf

  # Fonts
  AddType application/font-woff2 .woff2
  AddType application/font-woff .woff
## END Content Header


<IfModule mod_expires.c>
  # Enable expirations
  ExpiresActive On 
  # Default directive
  ExpiresDefault "access plus 1 month"
  # My favicon
  ExpiresByType image/x-icon "access plus 1 year"
  # Images
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  # CSS
  ExpiresByType text/css "access plus 1 month"
  # Javascript
  ExpiresByType application/javascript "access plus 1 year"
</IfModule>

<IfModule mod_deflate.c>
  # Compress HTML, CSS, JavaScript, Text, XML and fonts
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml

  # Remove browser bugs (only needed for really old browsers)
 # BrowserMatch ^Mozilla/4 gzip-only-text/html
  #BrowserMatch ^Mozilla/4\.0[678] no-gzip
 # BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
 # Header append Vary User-Agent
</IfModule>


<ifModule mod_headers.c>
    Header set Connection keep-alive
</ifModule>

## START 301 REDIRECTS

Redirect 301 /printers/concept-development/ http://accucode3d.com/printers/concept-molding
Redirect 301 /printers/ http://accucode3d.com/choosing-a-3d-printer
Redirect 301 /why-3d-printing/ http://accucode3d.com/benefits-of-3d-printing
Redirect 301 /industries-we-serve/jewlery/ http://accucode3d.com/industries-we-serve/jewelry