var gulp = require('gulp'),
		newer = require('gulp-newer'),
		wp_themes_dir = '<%= buildDir %>/<%= wpContentDir %>/themes',
		theme_dir = '<%= themeDirName %>';

gulp.task('move-files', ['move-partials', 'move-functions', 'move-function-partials', 'move-favicon', 'move-theme-files', 'move-plugins', 'move-crawler-files'], function() {
      // Move all files based on dependencies below
    });
  // Move theme partials
      gulp.task('move-partials', function() {
        return gulp.src(['<%= srcDir %>/partials/**/*'])
          .pipe(newer( wp_themes_dir + '/' +  theme_dir+'/partials/'))
          .pipe(gulp.dest( wp_themes_dir + '/' +  theme_dir+'/partials/'))
      });
    // Move functions
      gulp.task('move-functions', function() {
        return gulp.src(['<%= srcDir %>/functions.php'])
          .pipe(newer( wp_themes_dir + '/' +  theme_dir+'/'))
          .pipe(gulp.dest( wp_themes_dir + '/' +  theme_dir+'/'))
      });
      gulp.task('move-function-partials', function() {
        return gulp.src(['src/functions/*.php'])
          .pipe(newer( wp_themes_dir + '/' +  theme_dir+'/functions'))
          .pipe(gulp.dest( wp_themes_dir + '/' +  theme_dir+'/functions'))
      });

    // Move favicon
      gulp.task('move-favicon', function() {
        return gulp.src(['<%= srcDir %>/favicon.png'])
          .pipe(newer( wp_themes_dir + '/' +  theme_dir+'/'))
          .pipe(gulp.dest( wp_themes_dir + '/' +  theme_dir+'/'))
      });

    // Move plugins
      gulp.task('move-plugins', function() {
        return gulp.src(['<%= srcDir %>/plugins/**/*'])
          .pipe(newer('<%= buildDir %>/wp-content/plugins'))
          .pipe(gulp.dest('<%= buildDir %>/wp-content/plugins'))
      });
  // Move bot crawler thingies
      gulp.task('move-crawler-files', function() {
        return gulp.src(['<%= srcDir %>/robots.txt', '<%= srcDir %>/sitemap.xml', '<%= srcDir %>/.htaccess'])
          .pipe(newer('<%= buildDir %>'))
          .pipe(gulp.dest('<%= buildDir %>'))
      });

    // Move theme files
      gulp.task('move-theme-files', function() {
        return gulp.src(['<%= srcDir %>/style.css'])
          .pipe(newer( wp_themes_dir + '/' +  theme_dir+'/'))
          .pipe(gulp.dest( wp_themes_dir + '/' +  theme_dir+'/'))
      });