/*
	Dynamically generate CSS base
*/

'use strict';

var yeoman = require('yeoman-generator'),
    chalk = require('chalk'),
    yosay = require('yosay'),
// 		mkdirp = require('mkdirp'),
    fs = require('fs.extra')

module.exports = {
	css: function() {
		var done = this.async();
		
		// Set variables
		var cssBase = '',
				normalizeBase = `
					@import '../../node_modules/normalize-css/normalize.css' 
				`,
				resetBase = `
					@import '../../node_modules/reset.css/reset.css' 
				`,
				
				cssBaseDir = this.srcDir+"/css/global/",
				cssBaseFile = cssBaseDir+"reset.css";
		
		// If CSS base is set to Normalize
		if (this.cssBase === 'Normalize') {	
			// Set cssBase value 			
			cssBase = normalizeBase;
		} 
		// If CSS base is set to Reset
		if (this.cssBase === 'Reset') {
			// Set cssBase value
			cssBase = resetBase
		}
		
		// Create CSS base dir
		fs.mkdirRecursive( cssBaseDir, function() {
			// And then create css-base.css
			fs.writeFile(cssBaseFile, cssBase, function(err) {
				if(err) {
						return console.log(err);
				}
			}); 
		});
		done();
	}
}


