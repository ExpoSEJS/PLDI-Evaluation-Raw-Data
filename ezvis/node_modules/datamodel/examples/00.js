var fs =require('fs')
  , datamodel = require('..');

datamodel()
.declare('dirname', function(input, fill) {
    fill('/etc');
})
.append('file1', function(input, fill) {
	fs.readFile(this.dirname + '/group', function (err, data) {
      fill(err ? err : data.toString().substring(0, 7).concat('...'));
	});
})
.append('file2', function(input, fill) {
	fs.readFile(this.dirname + '/hosts', function (err, data) {
      fill(err ? err : data.toString().substring(0, 7).concat('...'));
	});
})
.append('file3', function(input, fill) {
	fs.readFile(this.dirname + '/unknown', function (err, data) {
      fill(err ? err : data.toString().substring(0, 7).concat('...'));
	});
})
.apply(function(err, res) {
    console.error('Error>', err);
    console.log('Result>', res);
});
