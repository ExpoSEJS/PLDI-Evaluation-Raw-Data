(function(){var e=function(){typeof String.prototype.format!="function"&&(String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;++t)e=e.replace(new RegExp("\\{"+t+"\\}","g"),arguments[t]);return e}),typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})};typeof module!="undefined"?module.exports=e:e()})();var OurJS=window.OurJS||{};(function(){$(document).foundation(),$(".right-off-canvas-menu").html($(".top-menu").html())})(),function(e){e.fn.toJSON=function(){var t={},n=this.serializeArray();return e.each(n,function(){t[this.name]!==undefined?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}(jQuery),function(){var e=decodeURIComponent(location.pathname);$("#keyNav>ul>li").removeClass("active"),$("#keyNav>ul>li>a").each(function(){var t=$(this);if(e.indexOf(t.attr("href"))>-1){t.closest("li").addClass("active");return}}),$("#keyNav>ul>li.active").size()<1&&$("#keyNav>ul>li").eq(0).addClass("active")}(),function(){var e=function(e,t){var n=function(e){return e<10?"0"+e:e};e=new Date(e);var r=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),o=e.getHours(),u=e.getMinutes(),a=e.getSeconds(),e=r+"-"+n(i)+"-"+n(s),f=n(o)+":"+n(u)+":"+n(a);return t?e:e+" "+f},t=function(){$(".formatdate").each(function(){var t=$(this),n=parseInt(t.text()),r=(new Date-n)/1e3|0,i=t.hasClass("date"),s;r<0||i?s=e(n,i):r<60?s=r+" seconds":r<3600?s=parseInt(r/60)+" minutes":r<86400?s=parseInt(r/3600)+" hours":r<259200?s=parseInt(r/86400)+" days":s=e(n,i),t.text(s)})};t(),OurJS.formatDateTime=e}(),function(){OurJS.loadMore=function(){var e=$("#articles"),t=$("#loader"),n=$("#loadmore"),r="#articles .article",i=function(i){i&&i.preventDefault&&i.preventDefault();if(n.attr("disabled"))return;n.attr("disabled",!0),t.show();var s=conf.pageSize||12,o;if(location.pathname.indexOf("userinfo")>-1){var u=$(r).size(),a=location.pathname.split("/")[2],f=u/s|0;o="/userjson/"+a+"/"+f}else{var u=$(r).size(),f=u/s|0;o="/json/"+conf.category+"/"+f}$.getJSON(o,function(i){var o=i.length,u=conf.homemeta||"home",a=$(r).eq(0),f=[];for(var l=0;l<o;l++){var c=a.clone(),h=i[l];c.find(".title>a").html(h.title).attr("href",h.content?"/article/"+(h.urlSlug||h._id):h.url),c.find(".author").html(h.author).attr("href","/userinfo/"+h.author),c.find(".keyword").html(h.keyword||"").attr("href","/{0}/{1}".format(u,h.category||"")),c.find(".category").html(h.category||"").attr("href","/{0}/{1}".format(u,h.category||"")),c.find(".formatdate.date").html(OurJS.formatDateTime(h.postdate,!0)),c.find(".summary").html(h.summary||""),f.push(c)}n.attr("disabled",o<s),t.hide(),e.append(f)})};e.size()&&($(r).size()<conf.pageSize&&n.attr("disabled",!0),n.click(i),e.size()&&$(window).scroll(function(){$(window).scrollTop()+$(window).height()==$(document).height()&&i()}))},OurJS.loadMore(),console&&console.log&&console.log("Powered By OurJS")}(),function(){var e=$("#nickname"),t=$("#addReply .editor"),n=["autumn","hidden","bitter","misty","silent","empty","dry","dark","summer","icy","delicate","quiet","white","cool","spring","winter","patient","twilight","dawn","crimson","wispy","weathered","blue","billowing","broken","cold","damp","falling","frosty","green","long","late","lingering","bold","little","morning","muddy","old","red","rough","still","small","sparkling","throbbing","shy","wandering","withered","wild","black","young","holy","solitary","fragrant","aged","snowy","proud","floral","restless","divine","polished","ancient","purple","lively","nameless"],r=["waterfall","river","breeze","moon","rain","wind","sea","morning","snow","lake","sunset","pine","shadow","leaf","dawn","glitter","forest","hill","cloud","meadow","sun","glade","bird","brook","butterfly","bush","dew","dust","field","fire","flower","firefly","feather","grass","haze","mountain","night","pond","darkness","snowflake","silence","sound","sky","shape","surf","thunder","violet","water","wildflower","wave","water","resonance","sun","wood","dream","cherry","tree","fog","frost","voice","paper","frog","smoke","star"],i=function(){return n[Math.floor(Math.random()*(n.length-1))]+"_"+r[Math.floor(Math.random()*(r.length-1))]},s=function(){$(".comments .command a.reply").on("click",function(){var e=$(this).closest("li"),n=e.find(".floor").text(),r=e.find(".info a").text(),i=t.html();i&&(i+="<br>"),t.focus().html(i+"#{0} @{1}<br><br>".format(n,r))}),$(".comments .command a.remove").on("click",function(){var e=$(this).closest("li"),t=e.find(".content"),n=parseInt(e.find(".floor").text()),r=conf._id;n>-1&&r&&$.get("/reply/del/{0}/{1}".format(r,n),function(e){t.html("<s>"+t.text()+"</s>")})}),$("#addReply .refresh").on("click",function(){var t=i();e.val(t).change()}),e.on("change",function(){$.cookie("nickname",e.val(),{expires:365,path:"/"})}).val($.cookie("nickname")||i()).change()};$("#addReply").submit(function(e){e.preventDefault();if(!conf.username&&!$("#nickname").val())return alert("Please signup or enter a nickname"),!1;var n=$("#addReply").toJSON(),r=t.html();n.reply=r,r&&conf._id&&(conf.username||n.nickname)&&$.ajax({url:"/reply/add/"+conf._id,type:"post",data:JSON.stringify(n),success:function(e){if(e)return alert(e);var i='<li><a class="avatar"><img src="http://www.gravatar.com/avatar/'+conf.useravatar+'">'+"</a>"+'<div class="info">'+" <b></b> "+' <a target="_blank"></a>'+' <span class="formatdate date"></span>'+"</div>"+'<div class="content"></div>'+"</li>",s=$(i);s.find(".info b").text("#"+$(".comments>ul>li").size()),s.find(".info span").text(OurJS.formatDateTime(new Date),!0),s.find(".content").html(r),conf.username?s.find(".info a").attr("href","/userinfo/"+conf.username).text(conf.username):s.find(".info a").text(n.nickname),$(".comments>ul").append(s),$("#wmd-input").val("").trigger("keydown"),t.html("")},error:function(e,t,n){alert(t+" "+n)}})}),s()}(),function(){var e=new MediumEditor(".editor",{anchorInputPlaceholder:"Type a link",buttonLabels:"fontawesome",buttons:["header1","header2","bold","italic","strikethrough","pre","quote","anchor","image","unorderedlist","orderedlist"],firstHeader:"h1",secondHeader:"h2",forcePlainText:!1}),t=function(e){var t=$(this),n=t.attr("id"),r=t.closest("form").find("[name={0}]".format(n));r.val(t.html())};$(".editor").on("keydown",t).on("mouseup",t),$("#editArticleForm").submit(function(){$(".editor").trigger("keydown")}),$(".editor").each(function(){var e=$(this),t=e.attr("id");if(t){var n=e.closest("form").find("[name={0}]".format(t)),r=n.val();r&&!e.val()&&e.html(r)}}),$("select[data-val]").each(function(){var e=$(this),t=e.data("val");e.find("option").each(function(){var e=$(this);e.val()==t&&e.attr("selected",!0)})})}()/* Powered by OurJS.com */