{"_id":"53de34982254d5a10461bf00","poster":"newghost","title":"Add an administrator user","category":"Learn","verify":1,"keyword":"Support","summary":"<p>There is no default administrator account by default。</p><p>There is a default user \"guest\"，password is \"123456\"</p><p>Here is the way to create an&nbsp;<span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">administrator user account</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">.</span></p><p><b>1) Change CRYPTOKEY</b></p><p>After install you'd better change the CRYPTOKEY in ourjs/config.magazine.js first, this key is used for encrypt the password。Once you change the CRYPTOKEY, you can't log in with \"guest\" any more.</p>","content":"<h2>There is no default administrator user account.</h2><p>There is a default user \"guest\"，password is \"123456\"</p><p><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">Here is the way to&nbsp;</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">create</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">&nbsp;an&nbsp;</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">administrator user account</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">.</span></p><h2><b>1) Change&nbsp;</b><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\"><b>CRYPTOKEY</b></span></h2><p>After installation you'd better change the <b>CRYPTOKEY in ourjs/config.magazine.js</b> first,  this key is used for encrypt the password。Once you change the CRYPTOKEY, you can't log in with \"guest\" any more.&nbsp;</p><p> </p><h2>2) Register a new account</h2><p>After registration on the web. Edit the user you just added, it's in the folder: ourjs/data/models/user, etc: </p><pre>/var/www/ourjs/data/models/user$ sudo nano 54de5426986df9bb010b5169</pre><p>Add a new property \"isAdmin\": 1</p><pre>{\"username\":\"youraccount\",\"password\":\"fc07b10fe29df08108dfce486afdf4e9b2\",\"email\":\"kris.newghost@gmail.com\",\"joinedTime\":1407058982952,\"_id\":\"54de0456986df9bb010b5169\",\"company\":\"\",\"briefinfo\":\"\",<b>\"isAdmin\":1</b>}</pre><h2>3) Restart the web server</h2><p><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">Kill the thread of ./ourjs.js config.magazine.js (it will restart by \"etc/init.d/ourjs\" thread&nbsp;</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">immediately</span><span style=\"font-family: inherit; font-size: 1rem; line-height: 1.6;\">), etc:</span><br></p><pre>admin@ip-172-31-16-67:/var/www/ourjs/data/models/user$ ps aux | grep ourjs<br>root       438  0.0  0.0   3956   624 ?        S    09:13   0:00 /bin/sh /etc/init.d/ourjs start<br>root      1165  1.4  5.2 630868 32692 ?        Sl   12:46   0:12 /root/local/bin/node /var/www/ourjs/svr/ourjs.js config.magazine.js<br>admin     1180  0.0  0.1   7548   848 pts/0    S+   13:01   0:00 grep ourjs<br>admin@ip-172-31-16-67:/var/www/ourjs/data/models/user$ sudo kill 1165<br></pre><p>Refresh the web twice.</p><p>This is to refresh the cache of users, once you became an administrator, you can refresh directly via this URL after you update any data models:&nbsp;</p><p><a href=\"http://localhost:8054/updatecache\">http://localhost:8054/updatecache</a></p><p><br></p>","description":"Thereisnodefaultadministratoraccountbydefault。Thereisadefaultuser\"guest\"，passwordis\"123456\"Hereisthewaytocreatean&nbsp;<spanstyle=\"font-fami","url":"","postdate":1407071384316,"publishTime":1407071425318,"replies":[{"nickname":"cold_suna","reply":"<p>sasaa</p>","postdate":1407372027800},{"reply":"<p>test</p>","poster":"leeds","postdate":1407373369946,"avatar":"d6aa521359fae4b14ceb18f9bf8f03f8"},{"nickname":"wild_breeze","reply":"<p>tes6</p><p><br></p><p><br></p>","postdate":1407375926315},{"nickname":"wandering_dawn","reply":"<p>TTest</p>","postdate":1407376441314},{"nickname":"green_leaf","reply":"#3 @wandering_dawn (Guest)<br><br><br>#3 @wandering_dawn (Guest)<br><br>","postdate":1408444389110}],"replyTime":1408444389110,"urlSlug":"add-an-administrator-user"}