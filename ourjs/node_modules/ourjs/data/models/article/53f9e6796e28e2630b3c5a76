{"_id":"53f9e6796e28e2630b3c5a76","poster":"newghost","title":"Add thumbnail Image to OurJS blog engine","category":"Plugins","verify":1,"keyword":"Support","summary":"<span style=\"color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Helvetica, Arial, sans-serif;\">Here is the way to add custom thumbnail image to ourjs open source blog engine. As showed below, we currently using text to display category. It's also a link which link to its category.</span>","content":" <p><a href=\"http://ourjs.org\">OurJS</a> is a high performance blog engine powered by node.js, all the data stored in the cache layer(memory) and sync to JSON files when needs to be updated, it's also support mongodb etc. &nbsp;(This site is running on <a href=\"http://code.ourjs.com/article/53de3af62254d5a10461bf01\">Amazon EC2 free tier</a>)</p><p>Here is the way to add custom thumbnail image to ourjs open source blog engine. As showed below, we currently using text to display category. It's also a link which link to its category.</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field1.png\" title=\"Image: http://ourjs.github.io/static/study/custom_field1.png\"><br></p><p>Our task to change the yellow region to an image.</p><h1>Update schema</h1><p>We need to update the schema of articles, the default location is here:&nbsp;./data/schema/article.js</p><p>Add a custom field: imageurl, type is url, i.e:</p><pre>{<br>    \"_id\"         : \"id\"<br>  , \"title\"       : \"shown,string\"<br>  , \"url\"         : \"url\"<br>  , \"imageurl\"    : \"url\"<br>  , \"verify\"      : \"shown,int\"<br>  , \"category\"    : \"shown,string\"<br>  , \"keyword\"     : \"shown\"<br>  , \"summary\"     : \"html\"<br>  , \"content\"     : \"html\"<br>  , \"description\" : \"string\"<br>  , \"hottest\"     : \"json\"<br>  , \"similar\"     : \"json\"<br>  , \"replies\"     : \"json\"<br>  , \"postdate\"    : \"int\"<br>  , \"poster\"      : \"shown\"<br>  , \"publishTime\" : \"int\"<br>  , \"replyTime\"   : \"int\"<br>}</pre><p>After you change this, restart the service (shutdown and reopen the ourjs.sh is OK)</p><p>Then enter the data manager to check whether the field is work i.e:&nbsp;<a href=\"http://localhost:8054/admin/data\">http://localhost:8054/admin/data</a> &nbsp;(You need to login with administrator &nbsp;role, default user: guest password: 123456)</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field2.png\" title=\"Image: http://ourjs.github.io/static/study/custom_field2.png\"><br></p><p>Add an article, you will see the field you just added:</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field3.png\" title=\"Image: http://ourjs.github.io/static/study/custom_field3.png\"><br></p><p>Data Manager is design for administrator. You can change any field in the JSON data.</p><p>Next step, we need to add this field to the page that normal user can edit it.</p><h1>Update Edit template</h1><p>Find the template of edit page, &nbsp;The default location is (theme magazine)&nbsp;.\\web\\magazine\\edit.tmpl</p><p>Add the imageurl to the right place. (ps: by default we use&nbsp;<a rel=\"nofollow\" target=\"_blank\" href=\"http://olado.github.io/doT/\">doT</a>&nbsp;as the template engine.)</p><pre>&nbsp; &nbsp; &nbsp; {{?}}<br>      &lt;label&gt;Title<br>      &lt;input type=\"text\"  name=\"title\"      value=\"{{=it.title || ''}}\"  placeholder=\"Title\"&gt;<br>      &lt;/label&gt;<br>      &lt;br&gt;&lt;br&gt;<br><span>      &lt;label&gt;Thumbnail Image<br>      &lt;input type=\"text\"  name=\"imageurl\"     value=\"{{=it.imageurl || ''}}\"  placeholder=\"Thumbnail Image\"&gt;<br>      &lt;/label&gt;<br>      &lt;br&gt;&lt;br&gt;</span></pre><p>Using \"New Post\" to verify: complete all the inputs:</p><p>1) imageurl is the url format.</p><p>2) Verify method is \"publish to Homepage\"</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field4.png\" title=\"Image: http://ourjs.github.io/static/study/custom_field4.png\"><br></p><p>Then submit.</p><h1>Update display template</h1><p>After you add this article with thumbnail image. We need to render it on the homepage, find the template of homepage, i.e:&nbsp;./web/magazine/home.tmpl</p><p>Add display rules:</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field5.png\"><br></p><p>Now, it's all done, refresh the homepage to check, you will see the thumbnail now.</p><p><img alt=\"\" src=\"http://ourjs.github.io/static/study/custom_field6.png\" title=\"Image: http://ourjs.github.io/static/study/custom_field6.png\"><br></p><div><br></div> ","description":"<spanstyle=\"color:rgb(34,34,34);font-family:'HelveticaNeue',Helvetica,Helvetica,Arial,sans-serif;\">Hereisthewaytoaddcustomthumbnailimagetoou","url":"","postdate":1408886393223,"publishTime":1408952525901,"urlSlug":"add-thumbnail-image-to-ourjs-blog-engine"}