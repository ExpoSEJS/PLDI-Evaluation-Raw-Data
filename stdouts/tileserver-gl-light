
> sqlite3@3.1.12 install /root/Targets/tileserver-gl-light/node_modules/sqlite3
> node-pre-gyp install --fallback-to-build

[sqlite3] Success: "/root/Targets/tileserver-gl-light/node_modules/sqlite3/lib/binding/node-v51-linux-x64/node_sqlite3.node" is installed via remote
/root/Targets/tileserver-gl-light
└─┬ tileserver-gl-light@2.2.0 
  ├─┬ @mapbox/mbtiles@0.9.0 
  │ ├── @mapbox/tiletype@0.3.1 
  │ ├── d3-queue@2.0.3 
  │ └─┬ sqlite3@3.1.12 
  │   ├── nan@2.7.0 
  │   └─┬ node-pre-gyp@0.6.38 
  │     ├─┬ hawk@3.1.3 
  │     │ ├── boom@2.10.1 
  │     │ ├── cryptiles@2.0.5 
  │     │ ├── hoek@2.16.3 
  │     │ └── sntp@1.0.9 
  │     ├─┬ mkdirp@0.5.1 
  │     │ └── minimist@0.0.8 
  │     ├─┬ nopt@4.0.1 
  │     │ ├── abbrev@1.1.0 
  │     │ └─┬ osenv@0.1.4 
  │     │   ├── os-homedir@1.0.2 
  │     │   └── os-tmpdir@1.0.2 
  │     ├─┬ npmlog@4.1.2 
  │     │ ├─┬ are-we-there-yet@1.1.4 
  │     │ │ ├── delegates@1.0.0 
  │     │ │ └─┬ readable-stream@2.3.3 
  │     │ │   ├── core-util-is@1.0.2 
  │     │ │   ├── inherits@2.0.3 
  │     │ │   ├── isarray@1.0.0 
  │     │ │   ├── process-nextick-args@1.0.7 
  │     │ │   ├── safe-buffer@5.1.1 
  │     │ │   ├── string_decoder@1.0.3 
  │     │ │   └── util-deprecate@1.0.2 
  │     │ ├── console-control-strings@1.1.0 
  │     │ ├─┬ gauge@2.7.4 
  │     │ │ ├── aproba@1.2.0 
  │     │ │ ├── has-unicode@2.0.1 
  │     │ │ ├── object-assign@4.1.1 
  │     │ │ ├── signal-exit@3.0.2 
  │     │ │ ├─┬ string-width@1.0.2 
  │     │ │ │ ├── code-point-at@1.1.0 
  │     │ │ │ └─┬ is-fullwidth-code-point@1.0.0 
  │     │ │ │   └── number-is-nan@1.0.1 
  │     │ │ ├─┬ strip-ansi@3.0.1 
  │     │ │ │ └── ansi-regex@2.1.1 
  │     │ │ └── wide-align@1.1.2 
  │     │ └── set-blocking@2.0.0 
  │     ├─┬ rc@1.2.1 
  │     │ ├── deep-extend@0.4.2 
  │     │ ├── ini@1.3.4 
  │     │ ├── minimist@1.2.0 
  │     │ └── strip-json-comments@2.0.1 
  │     ├─┬ request@2.81.0 
  │     │ ├── aws-sign2@0.6.0 
  │     │ ├── aws4@1.6.0 
  │     │ ├── caseless@0.12.0 
  │     │ ├─┬ combined-stream@1.0.5 
  │     │ │ └── delayed-stream@1.0.0 
  │     │ ├── extend@3.0.1 
  │     │ ├── forever-agent@0.6.1 
  │     │ ├─┬ form-data@2.1.4 
  │     │ │ └── asynckit@0.4.0 
  │     │ ├─┬ har-validator@4.2.1 
  │     │ │ ├─┬ ajv@4.11.8 
  │     │ │ │ ├── co@4.6.0 
  │     │ │ │ └─┬ json-stable-stringify@1.0.1 
  │     │ │ │   └── jsonify@0.0.0 
  │     │ │ └── har-schema@1.0.5 
  │     │ ├─┬ http-signature@1.1.1 
  │     │ │ ├── assert-plus@0.2.0 
  │     │ │ ├─┬ jsprim@1.4.1 
  │     │ │ │ ├── assert-plus@1.0.0 
  │     │ │ │ ├── extsprintf@1.3.0 
  │     │ │ │ ├── json-schema@0.2.3 
  │     │ │ │ └─┬ verror@1.10.0 
  │     │ │ │   └── core-util-is@1.0.2 
  │     │ │ └─┬ sshpk@1.13.1 
  │     │ │   ├── asn1@0.2.3 
  │     │ │   ├── assert-plus@1.0.0 
  │     │ │   ├── bcrypt-pbkdf@1.0.1 
  │     │ │   ├── dashdash@1.14.1 
  │     │ │   ├── ecc-jsbn@0.1.1 
  │     │ │   ├── getpass@0.1.7 
  │     │ │   ├── jsbn@0.1.1 
  │     │ │   └── tweetnacl@0.14.5 
  │     │ ├── is-typedarray@1.0.0 
  │     │ ├── isstream@0.1.2 
  │     │ ├── json-stringify-safe@5.0.1 
  │     │ ├─┬ mime-types@2.1.17 
  │     │ │ └── mime-db@1.30.0 
  │     │ ├── oauth-sign@0.8.2 
  │     │ ├── performance-now@0.2.0 
  │     │ ├── qs@6.4.0 
  │     │ ├── safe-buffer@5.1.1 
  │     │ ├── stringstream@0.0.5 
  │     │ ├─┬ tough-cookie@2.3.3 
  │     │ │ └── punycode@1.4.1 
  │     │ ├── tunnel-agent@0.6.0 
  │     │ └── uuid@3.1.0 
  │     ├─┬ rimraf@2.6.2 
  │     │ └─┬ glob@7.1.2 
  │     │   ├── fs.realpath@1.0.0 
  │     │   ├─┬ inflight@1.0.6 
  │     │   │ └── wrappy@1.0.2 
  │     │   ├── inherits@2.0.3 
  │     │   ├─┬ minimatch@3.0.4 
  │     │   │ └─┬ brace-expansion@1.1.8 
  │     │   │   ├── balanced-match@1.0.0 
  │     │   │   └── concat-map@0.0.1 
  │     │   ├─┬ once@1.4.0 
  │     │   │ └── wrappy@1.0.2 
  │     │   └── path-is-absolute@1.0.1 
  │     ├── semver@5.4.1 
  │     ├─┬ tar@2.2.1 
  │     │ ├── block-stream@0.0.9 
  │     │ ├─┬ fstream@1.0.11 
  │     │ │ └── graceful-fs@4.1.11 
  │     │ └── inherits@2.0.3 
  │     └─┬ tar-pack@3.4.0 
  │       ├─┬ debug@2.6.9 
  │       │ └── ms@2.0.0 
  │       ├─┬ fstream@1.0.11 
  │       │ ├── graceful-fs@4.1.11 
  │       │ └── inherits@2.0.3 
  │       ├─┬ fstream-ignore@1.0.5 
  │       │ ├── inherits@2.0.3 
  │       │ └─┬ minimatch@3.0.4 
  │       │   └─┬ brace-expansion@1.1.8 
  │       │     ├── balanced-match@1.0.0 
  │       │     └── concat-map@0.0.1 
  │       ├─┬ once@1.4.0 
  │       │ └── wrappy@1.0.2 
  │       ├─┬ readable-stream@2.3.3 
  │       │ ├── core-util-is@1.0.2 
  │       │ ├── inherits@2.0.3 
  │       │ ├── isarray@1.0.0 
  │       │ ├── process-nextick-args@1.0.7 
  │       │ ├── safe-buffer@5.1.1 
  │       │ ├── string_decoder@1.0.3 
  │       │ └── util-deprecate@1.0.2 
  │       └── uid-number@0.0.6 
  ├── @mapbox/sphericalmercator@1.0.5 
  ├─┬ @mapbox/vector-tile@1.3.0 
  │ └── @mapbox/point-geometry@0.1.0 
  ├── advanced-pool@0.3.3 
  ├── base64url@2.0.0 
  ├── clone@2.1.1 
  ├─┬ color@1.0.3 
  │ ├─┬ color-convert@1.9.0 
  │ │ └── color-name@1.1.3 
  │ └─┬ color-string@1.5.2 
  │   └─┬ simple-swizzle@0.2.2 
  │     └── is-arrayish@0.3.1 
  ├─┬ cors@2.8.4 
  │ ├── object-assign@4.1.1 
  │ └── vary@1.1.2 
  ├─┬ express@4.15.4 
  │ ├─┬ accepts@1.3.4 
  │ │ └── negotiator@0.6.1 
  │ ├── array-flatten@1.1.1 
  │ ├── content-disposition@0.5.2 
  │ ├── content-type@1.0.4 
  │ ├── cookie@0.3.1 
  │ ├── cookie-signature@1.0.6 
  │ ├─┬ debug@2.6.8 
  │ │ └── ms@2.0.0 
  │ ├── depd@1.1.1 
  │ ├── encodeurl@1.0.1 
  │ ├── escape-html@1.0.3 
  │ ├── etag@1.8.1 
  │ ├─┬ finalhandler@1.0.6 
  │ │ ├── debug@2.6.9 
  │ │ └── unpipe@1.0.0 
  │ ├── fresh@0.5.0 
  │ ├── merge-descriptors@1.0.1 
  │ ├── methods@1.1.2 
  │ ├─┬ on-finished@2.3.0 
  │ │ └── ee-first@1.1.1 
  │ ├── parseurl@1.3.2 
  │ ├── path-to-regexp@0.1.7 
  │ ├─┬ proxy-addr@1.1.5 
  │ │ ├── forwarded@0.1.2 
  │ │ └── ipaddr.js@1.4.0 
  │ ├── qs@6.5.0 
  │ ├── range-parser@1.2.0 
  │ ├─┬ send@0.15.4 
  │ │ ├── destroy@1.0.4 
  │ │ ├─┬ http-errors@1.6.2 
  │ │ │ └── inherits@2.0.3 
  │ │ └── mime@1.3.4 
  │ ├── serve-static@1.12.4 
  │ ├── setprototypeof@1.0.3 
  │ ├── statuses@1.3.1 
  │ ├─┬ type-is@1.6.15 
  │ │ └── media-typer@0.3.0 
  │ └── utils-merge@1.0.0 
  ├─┬ glyph-pbf-composite@0.0.2 
  │ └─┬ protocol-buffers@2.7.0 
  │   ├── generate-function@2.0.0 
  │   ├─┬ generate-object-property@1.2.0 
  │   │ └── is-property@1.0.2 
  │   ├── protobuf-schema@1.5.1 
  │   ├── resolve-protobuf-schema@1.0.2 
  │   ├─┬ signed-varint@2.0.1 
  │   │ └── varint@5.0.0 
  │   └── varint@4.0.1 
  ├─┬ handlebars@4.0.10 
  │ ├── async@1.5.2 
  │ ├─┬ optimist@0.6.1 
  │ │ ├── minimist@0.0.10 
  │ │ └── wordwrap@0.0.3 
  │ ├─┬ source-map@0.4.4 
  │ │ └── amdefine@1.0.1 
  │ └─┬ uglify-js@2.8.29 
  │   ├── source-map@0.5.7 
  │   ├── uglify-to-browserify@1.0.2 
  │   └─┬ yargs@3.10.0 
  │     ├── camelcase@1.2.1 
  │     ├─┬ cliui@2.1.0 
  │     │ ├─┬ center-align@0.1.3 
  │     │ │ ├─┬ align-text@0.1.4 
  │     │ │ │ ├─┬ kind-of@3.2.2 
  │     │ │ │ │ └── is-buffer@1.1.5 
  │     │ │ │ ├── longest@1.0.1 
  │     │ │ │ └── repeat-string@1.6.1 
  │     │ │ └── lazy-cache@1.0.4 
  │     │ ├── right-align@0.1.3 
  │     │ └── wordwrap@0.0.2 
  │     ├── decamelize@1.2.0 
  │     └── window-size@0.1.0 
  ├── http-shutdown@1.2.0 
  ├─┬ morgan@1.8.2 
  │ ├── basic-auth@1.1.0 
  │ └── on-headers@1.0.1 
  ├─┬ nomnom@1.8.1 
  │ ├─┬ chalk@0.4.0 
  │ │ ├── ansi-styles@1.0.0 
  │ │ ├── has-color@0.1.7 
  │ │ └── strip-ansi@0.1.1 
  │ └── underscore@1.6.0 
  ├─┬ pbf@3.0.5 
  │ ├── ieee754@1.1.8 
  │ └─┬ resolve-protobuf-schema@2.0.0 
  │   └── protocol-buffers-schema@2.2.0 
  ├─┬ proj4@2.4.4 
  │ ├── mgrs@1.0.0 
  │ └── wkt-parser@1.2.0 
  ├─┬ request@2.81.0 
  │ ├── aws-sign2@0.6.0 
  │ ├── aws4@1.6.0 
  │ ├── caseless@0.12.0 
  │ ├─┬ combined-stream@1.0.5 
  │ │ └── delayed-stream@1.0.0 
  │ ├── extend@3.0.1 
  │ ├── forever-agent@0.6.1 
  │ ├─┬ form-data@2.1.4 
  │ │ └── asynckit@0.4.0 
  │ ├─┬ har-validator@4.2.1 
  │ │ ├─┬ ajv@4.11.8 
  │ │ │ ├── co@4.6.0 
  │ │ │ └─┬ json-stable-stringify@1.0.1 
  │ │ │   └── jsonify@0.0.0 
  │ │ └── har-schema@1.0.5 
  │ ├─┬ hawk@3.1.3 
  │ │ ├── boom@2.10.1 
  │ │ ├── cryptiles@2.0.5 
  │ │ ├── hoek@2.16.3 
  │ │ └── sntp@1.0.9 
  │ ├─┬ http-signature@1.1.1 
  │ │ ├── assert-plus@0.2.0 
  │ │ ├─┬ jsprim@1.4.1 
  │ │ │ ├── assert-plus@1.0.0 
  │ │ │ ├── extsprintf@1.3.0 
  │ │ │ ├── json-schema@0.2.3 
  │ │ │ └─┬ verror@1.10.0 
  │ │ │   ├── assert-plus@1.0.0 
  │ │ │   └── core-util-is@1.0.2 
  │ │ └─┬ sshpk@1.13.1 
  │ │   ├── asn1@0.2.3 
  │ │   ├── assert-plus@1.0.0 
  │ │   ├── bcrypt-pbkdf@1.0.1 
  │ │   ├─┬ dashdash@1.14.1 
  │ │   │ └── assert-plus@1.0.0 
  │ │   ├── ecc-jsbn@0.1.1 
  │ │   ├─┬ getpass@0.1.7 
  │ │   │ └── assert-plus@1.0.0 
  │ │   ├── jsbn@0.1.1 
  │ │   └── tweetnacl@0.14.5 
  │ ├── is-typedarray@1.0.0 
  │ ├── isstream@0.1.2 
  │ ├── json-stringify-safe@5.0.1 
  │ ├─┬ mime-types@2.1.17 
  │ │ └── mime-db@1.30.0 
  │ ├── oauth-sign@0.8.2 
  │ ├── performance-now@0.2.0 
  │ ├── qs@6.4.0 
  │ ├── safe-buffer@5.1.1 
  │ ├── stringstream@0.0.5 
  │ ├─┬ tough-cookie@2.3.3 
  │ │ └── punycode@1.4.1 
  │ ├── tunnel-agent@0.6.0 
  │ └── uuid@3.1.0 
  └── tileserver-gl-styles@1.2.0 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/tileserver-gl-light/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0663 took 2.5435s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Unexpected character '#' (1:78) on program #!/usr/bin/env node

'use strict';

var fs = require('fs'),
    path = require('path'),
    request = require('request');

var mbtiles = require('@mapbox/mbtiles');

var packageJson = require('../package');

var opts = require('nomnom')
  .option('mbtiles', {
    default: undefined,
    help: 'MBTiles file (uses demo configuration);\n' +
          '\t    ignored if the configuration file is also specified',
    position: 0
  })
  .option('config', {
    abbr: 'c',
    default: 'config.json',
    help: 'Configuration file'
  })
  .option('bind', {
    abbr: 'b',
    default: undefined,
    help: 'Bind address'
  })
  .option('port', {
    abbr: 'p',
    default: 8080,
    help: 'Port'
  })
  .option('cors', {
    default: true,
    help: 'Enable Cross-origin resource sharing headers'
  })
  .option('verbose', {
    abbr: 'V',
    flag: true,
    help: 'More verbose output'
  })
  .option('version', {
    abbr: 'v',
    flag: true,
    help: 'Version info',
    callback: function() {
      return packageJson.name + ' v' + packageJson.version;
    }
  }).parse();


console.log('Starting ' + packageJson.name + ' v' + packageJson.version);

var startServer = function(configPath, config) {
  return require('./server')({
    configPath: configPath,
    config: config,
    bind: opts.bind,
    port: opts.port,
    cors: opts.cors
  });
};

var startWithMBTiles = function(mbtilesFile) {
  console.log('Automatically creating config file for ' + mbtilesFile);

  mbtilesFile = path.resolve(process.cwd(), mbtilesFile);

  var mbtilesStats = fs.statSync(mbtilesFile);
  if (!mbtilesStats.isFile() || mbtilesStats.size === 0) {
    console.log('ERROR: Not valid MBTiles file: ' + mbtilesFile);
    process.exit(1);
  }
  var instance = new mbtiles(mbtilesFile, function(err) {
    instance.getInfo(function(err, info) {
      if (err || !info) {
        console.log('ERROR: Metadata missing in the MBTiles.');
        console.log('       Make sure ' + path.basename(mbtilesFile) +
                    ' is valid MBTiles.');
        process.exit(1);
      }
      var bounds = info.bounds;

      var styleDir = path.resolve(__dirname, "../node_modules/tileserver-gl-styles/");

      var config = {
        "options": {
          "paths": {
            "root": styleDir,
            "fonts": "fonts",
            "styles": "styles",
            "mbtiles": path.dirname(mbtilesFile)
          }
        },
        "styles": {},
        "data": {}
      };

      if (info.format == 'pbf' &&
          info.name.toLowerCase().indexOf('openmaptiles') > -1) {
        var omtV = (info.version || '').split('.');

        config['data']['v' + omtV[0]] = {
          "mbtiles": path.basename(mbtilesFile)
        };


        var styles = fs.readdirSync(path.resolve(styleDir, 'styles'));
        for (var i = 0; i < styles.length; i++) {
          var styleName = styles[i];
          var styleFileRel = styleName + '/style.json';
          var styleFile = path.resolve(styleDir, 'styles', styleFileRel);
          if (fs.existsSync(styleFile)) {
            var styleJSON = require(styleFile);
            var omtVersionCompatibility =
              ((styleJSON || {}).metadata || {})['openmaptiles:version'] || 'x';
            var m = omtVersionCompatibility.toLowerCase().split('.');

            var isCompatible = !(
              m[0] != 'x' && (
                m[0] != omtV[0] || (
                  (m[1] || 'x') != 'x' && (
                    m[1] != omtV[1] || (
                      (m[2] || 'x') != 'x' &&
                      m[2] != omtV[2]
                    )
                  )
                )
              )
            );

            if (isCompatible) {
              var styleObject = {
                "style": styleFileRel,
                "tilejson": {
                  "bounds": bounds
                }
              };
              config['styles'][styleName] = styleObject;
            } else {
              console.log('Style', styleName, 'requires OpenMapTiles version',
              omtVersionCompatibility, 'but mbtiles is version', info.version);
            }
          }
        }
      } else {
        console.log('WARN: MBTiles not in "openmaptiles" format. ' +
                    'Serving raw data only...');
        config['data'][(info.id || 'mbtiles')
                           .replace(/\//g, '_')
                           .replace(/\:/g, '_')
                           .replace(/\?/g, '_')] = {
          "mbtiles": path.basename(mbtilesFile)
        };
      }

      if (opts.verbose) {
        console.log(JSON.stringify(config, undefined, 2));
      } else {
        console.log('Run with --verbose to see the config file here.');
      }

      return startServer(null, config);
    });
  });
};

fs.stat(path.resolve(opts.config), function(err, stats) {
  if (err || !stats.isFile() || stats.size === 0) {
    var mbtiles = opts.mbtiles;
    if (!mbtiles) {
      // try to find in the cwd
      var files = fs.readdirSync(process.cwd());
      for (var i=0; i < files.length; i++) {
        var filename = files[i];
        if (filename.endsWith('.mbtiles')) {
          var mbTilesStats = fs.statSync(filename);
          if (mbTilesStats.isFile() && mbTilesStats.size > 0) {
            mbtiles = filename;
            break;
          }
        }
      }
      if (mbtiles) {
        console.log('No MBTiles specified, using ' + mbtiles);
        return startWithMBTiles(mbtiles);
      } else {
        var url = 'https://github.com/klokantech/tileserver-gl/releases/download/v1.3.0/zurich_switzerland.mbtiles';
        var filename = 'zurich_switzerland.mbtiles';
        var stream = fs.createWriteStream(filename);
        console.log('Downloading sample data (' + filename + ') from ' + url);
        stream.on('finish', function() {
          return startWithMBTiles(filename);
        });
        return request.get(url).pipe(stream);
      }
    }
    if (mbtiles) {
      return startWithMBTiles(mbtiles);
    }
  } else {
    console.log('Using specified config file from ' + opts.config);
    return startServer(opts.config, null);
  }
});
 at SyntaxError: Unexpected character '#' (1:78)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2756:10)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp.eat (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:536:12)
    at Parser.pp.semicolon (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:581:15)
    at Parser.pp$1.parseVarStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:918:10)
    at Parser.pp$1.parseStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:706:19)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
