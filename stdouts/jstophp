/root/Targets/jstophp
└─┬ jstophp@0.2.7 
  ├─┬ escope@1.0.3 
  │ └── estraverse@2.0.0 
  ├── esprima@1.2.5 
  ├─┬ rocambole@0.3.6 
  │ └── esprima@1.0.4 
  └── yargs@1.3.3 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/jstophp/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0404 took 5.9231s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Unexpected character '#' (1:78) on program #!/usr/bin/env node
/*global process, require, module, global*/
(function() {
  // #default is runtime embedded in output file
  // --runtime runtime.php #runtime exists at path; link to via require()
  // --runtime-only #output only the runtime
  // --fragment #no runtime included
  // --test #run tests only

  var fs = require('fs');
  var path = require('path');
  var yargs = require('yargs');
  var transform = require('./tools/transform.js');
  var childProcess = require('child_process');

  var argv = yargs
    .boolean(['debug', 'fragment', 'runtime-only', 'test', 'quiet'])
    .alias('out', 'o')
    .alias('quiet', 'q')
    .alias('modules', 'm')
    .argv;

  var logTo = argv.quiet ? 'none' : 'stdout';

  if (argv.test) {
    require('./test/transforms').run();
    compileTests();
    runTests();
  } else {
    processTransform(argv);
  }


  function processTransform(argv) {
    var outfile = argv.out;
    if (logTo === 'stdout' && !outfile) {
      logTo = 'stderr';
    }

    var pathToRuntime = argv.runtime;
    if (!argv.fragment && !pathToRuntime) {
      var includeModules = argv.modules || '';
      var includeAllModules = false;
      if (includeModules === 'all') {
        includeAllModules = true;
        includeModules = '';
      }
      includeModules = includeModules.split(',');
      var runtime = transform.buildRuntime({
        includeModules: includeModules,
        includeAllModules: includeAllModules,
        includeDebug: argv.debug,
        includeTest: argv.test,
        log: log
      });
      if (argv['runtime-only']) {
        outputContent(outfile, '<?php\n' + runtime, 'runtime.php');
        process.exit(0);
      }
    }

    if (!process.stdin.isTTY) {
      //process input from stdin
      processInputStream();
    } else {
      //process input from files specified as arguments
      processInputFiles();
    }

    function processInputStream() {
      var input = [];
      var stdin = process.stdin;
      stdin.setEncoding('utf8');
      stdin.on('data', function(data) {
        input.push(data);
      });
      stdin.on('end', function() {
        var source = input.join('');
        log('Processing input from STDIN ...');
        var output = transform({
          source: source
        });
        output = output.replace(/^\n+|\n+$/g, '');
        if (runtime) {
          output = runtime + '\n\n' + output;
        } else
        if (pathToRuntime) {
          output = 'require_once(' + JSON.stringify(pathToRuntime) + ');\n\n' + output;
        }
        outputContent(outfile, '<?php\n' + output + '\n');
      });
      stdin.resume();
    }

    function processInputFiles() {
      var infiles = argv._;
      if (!infiles.length) {
        log('No input file(s) specified.');
        process.exit(1);
      }
      var output = infiles.map(function(infile) {
        try {
          var source = fs.readFileSync(infile, 'utf8');
        } catch(e) {
          if (e.code === 'ENOENT') {
            log('Unable to open file `' +  infile + '`');
            process.exit(1);
          }
          throw e;
        }
        log('Processing file `' +  infile + '` ...');
        var output = transform({
          source: source
        });
        output = output.replace(/^\n+|\n+$/g, '');
        return output;
      });

      if (runtime) {
        output.unshift(runtime);
      } else
      if (pathToRuntime) {
        output.unshift('require_once(' + JSON.stringify(pathToRuntime) + ');');
      }
      outputContent(outfile, '<?php\n' + output.join('\n\n') + '\n');
    }

  }

  function outputContent(outfile, content, defaultFileName) {
    if (!outfile) {
      process.stdout.write(content);
      log('Output sent to STDOUT');
      return;
    }
    if (defaultFileName && !outfile.match(/\.php$/)) {
      outfile = path.join(outfile, defaultFileName);
    }
    fs.writeFileSync(outfile, content, 'utf8');
    log('Output saved to', outfile);
  }

  function compileTests() {
    var testSource = fs.readFileSync(__dirname + '/tests.php', 'utf8');
    testSource.replace(/require_once\('test\/compiled\/(.*?)\.php'\)/g, function(_, name) {
      var argv = {
        fragment: true,
        out: __dirname + '/test/compiled/' + name + '.php',
        _: [__dirname + '/test/' + name + '.js']
      };
      processTransform(argv);
    });
  }

  function runTests() {
    var child = childProcess.spawn('php', ['-f', 'tests.php'], {cwd: __dirname});
    child.stdout.on('data', function(data) {
      process.stdout.write(data);
    });
    child.stderr.on('data', function(data) {
      process.stderr.write(data);
    });
    child.on('close', function(code) {
      process.exit(code);
    });
  }

  function log() {
    if (logTo === 'stdout') {
      console.log.apply(console, arguments);
    } else
    if (logTo === 'stderr') {
      console.error.apply(console, arguments);
    }
  }

})(); at SyntaxError: Unexpected character '#' (1:78)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2756:10)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp.eat (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:536:12)
    at Parser.pp.semicolon (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:581:15)
    at Parser.pp$1.parseVarStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:918:10)
    at Parser.pp$1.parseStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:706:19)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
