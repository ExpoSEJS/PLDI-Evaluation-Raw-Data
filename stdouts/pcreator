/root/Targets/pcreator
└─┬ pcreator@1.0.6 
  ├── async@1.5.2 
  ├─┬ inquirer@0.11.4 
  │ ├── ansi-escapes@1.4.0 
  │ ├── ansi-regex@2.1.1 
  │ ├─┬ chalk@1.1.3 
  │ │ ├── ansi-styles@2.2.1 
  │ │ ├── escape-string-regexp@1.0.5 
  │ │ ├── has-ansi@2.0.0 
  │ │ └── supports-color@2.0.0 
  │ ├─┬ cli-cursor@1.0.2 
  │ │ └─┬ restore-cursor@1.0.1 
  │ │   ├── exit-hook@1.1.1 
  │ │   └── onetime@1.1.0 
  │ ├── cli-width@1.1.1 
  │ ├─┬ figures@1.7.0 
  │ │ └── object-assign@4.1.1 
  │ ├── lodash@3.10.1 
  │ ├─┬ readline2@1.0.1 
  │ │ ├── code-point-at@1.1.0 
  │ │ ├─┬ is-fullwidth-code-point@1.0.0 
  │ │ │ └── number-is-nan@1.0.1 
  │ │ └── mute-stream@0.0.5 
  │ ├─┬ run-async@0.1.0 
  │ │ └─┬ once@1.4.0 
  │ │   └── wrappy@1.0.2 
  │ ├── rx-lite@3.1.2 
  │ ├── string-width@1.0.2 
  │ ├── strip-ansi@3.0.1 
  │ └── through@2.3.8 
  ├─┬ mkdirp@0.5.1 
  │ └── minimist@0.0.8 
  └─┬ request@2.82.0 
    ├── aws-sign2@0.7.0 
    ├── aws4@1.6.0 
    ├── caseless@0.12.0 
    ├─┬ combined-stream@1.0.5 
    │ └── delayed-stream@1.0.0 
    ├── extend@3.0.1 
    ├── forever-agent@0.6.1 
    ├─┬ form-data@2.3.1 
    │ └── asynckit@0.4.0 
    ├─┬ har-validator@5.0.3 
    │ ├─┬ ajv@5.2.2 
    │ │ ├── co@4.6.0 
    │ │ ├── fast-deep-equal@1.0.0 
    │ │ ├── json-schema-traverse@0.3.1 
    │ │ └─┬ json-stable-stringify@1.0.1 
    │ │   └── jsonify@0.0.0 
    │ └── har-schema@2.0.0 
    ├─┬ hawk@6.0.2 
    │ ├── boom@4.3.1 
    │ ├─┬ cryptiles@3.1.2 
    │ │ └── boom@5.2.0 
    │ ├── hoek@4.2.0 
    │ └── sntp@2.0.2 
    ├─┬ http-signature@1.2.0 
    │ ├── assert-plus@1.0.0 
    │ ├─┬ jsprim@1.4.1 
    │ │ ├── extsprintf@1.3.0 
    │ │ ├── json-schema@0.2.3 
    │ │ └─┬ verror@1.10.0 
    │ │   └── core-util-is@1.0.2 
    │ └─┬ sshpk@1.13.1 
    │   ├── asn1@0.2.3 
    │   ├── bcrypt-pbkdf@1.0.1 
    │   ├── dashdash@1.14.1 
    │   ├── ecc-jsbn@0.1.1 
    │   ├── getpass@0.1.7 
    │   ├── jsbn@0.1.1 
    │   └── tweetnacl@0.14.5 
    ├── is-typedarray@1.0.0 
    ├── isstream@0.1.2 
    ├── json-stringify-safe@5.0.1 
    ├─┬ mime-types@2.1.17 
    │ └── mime-db@1.30.0 
    ├── oauth-sign@0.8.2 
    ├── performance-now@2.1.0 
    ├── qs@6.5.1 
    ├── safe-buffer@5.1.1 
    ├── stringstream@0.0.5 
    ├─┬ tough-cookie@2.3.3 
    │ └── punycode@1.4.1 
    ├── tunnel-agent@0.6.0 
    └── uuid@3.1.0 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/pcreator/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0623 took 6.1875s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Unexpected character '#' (1:78) on program #!/usr/bin/env node

var mkdirp = require('mkdirp')
var path = require('path')
var inquirer = require('inquirer')
var async = require('async')
var request = require('request')
var fs = require('fs')

var installedScripts = []

Array.prototype.findIndex = function (predicate) {
  if (this === null) {
    throw new TypeError('Array.prototype.findIndex called on null or undefined')
  }
  if (typeof predicate !== 'function') {
    throw new TypeError('predicate must be a function')
  }
  var list = Object(this)
  var length = list.length >>> 0
  var thisArg = arguments[1]
  var value

  for (var i = 0; i < length; i++) {
    value = list[i]
    if (predicate.call(thisArg, value, i, list)) {
      return i
    }
  }
  return -1
}

function check (e, i, a) {
  if (e === 'react-dom.min.js' || e === 'react.min.js') return true
  return false
}

function getFilePath () {
  if (!process.argv[3]) {
    return process.env.PWD
  } else if (/\//.test(process.argv[2]) || /\\/.test(process.argv[2]) || /..\//.test(process.argv[2]) || /..\\/.test(process.argv[2])) {
    return path.join(process.env.PWD, process.argv[3])
  } else {
    return process.argv[3]
  }
}

function printHelp (err) {
  if (err) {
    var lines = [
      'Error: ' + err,
      '',
      'Welcome to the PCreator v1.0 help!',
      '',
      'Usage:',
      '  pcreator <project name> <project path> [flags]',
      '',
      'Flags:',
      '  -h or --help - Shows help.'
    ]
    console.log(lines.join('\n'))
    return process.exit(1)
  } else {
    var lns = [
      'Welcome to the PCreator v1.0 help!',
      '',
      'Usage:',
      '  pcreator <project name> <project path> [flags]',
      '',
      'Flags:',
      '  -h or --help - Shows help.'
    ]
    console.log(lns.join('\n'))
    return process.exit(1)
  }
}

if (!process.argv[2]) {
  printHelp('Project name is required')
} else {
  var pTitle = process.argv[2]
  var p = path.join(getFilePath(), process.argv[3])
  var jsd = path.join(p, 'js')
  var cssd = path.join(p, 'css')
  var imgd = path.join(p, 'img')
}

function getScript (u, cb) {
  request(u, function (err, res, body) {
    if (err) return cb(err)
    return cb(null, body)
  })
}

function handleRequest (lib, cb, err, res, body) {
  if (err) return cb(err)
  body = JSON.parse(body)
  if (body !== []) {
    if (lib === 'react' || lib === 'riot') {
      body[0].assets.forEach(function (a, i) {
        var v = body[0].versions[0]
        var ri = a.files.findIndex(function (e, i, a) { if (e === 'riot+compiler.min.js') { return true }; return false })
        if (lib === 'react' && a.files.findIndex(check) !== -1 && a.version === v) {
          var i1 = a.files.findIndex(function (e, i, a) {
            if (e === 'react-dom.min.js') {
              installedScripts.push(e)
              return true
            }
            return false
          })
          var i2 = a.files.findIndex(function (e, i, a) {
            if (e === 'react.min.js') {
              installedScripts.push(e)
              return true
            }
            return false
          })
          var m1 = a.files[i1]
          var m2 = a.files[i2]
          var u1 = 'http://cdn.jsdelivr.net/' + lib + '/' + v + '/' + m1
          var u2 = 'http://cdn.jsdelivr.net/' + lib + '/' + v + '/' + m2
          console.log('Version: %s, File: %s, URL: %s', v, m1, u1)
          console.log('Version: %s, File: %s, URL: %s', v, m2, u2)
          var o = { version: v, files: [m1, m2] }
          getScript(u1, function (err, s) {
            if (err) return cb(err)
            getScript(u2, function (err, s2) {
              if (err) return cb(err)
              return cb(null, [s, s2], o)
            })
          })
        } else if (ri !== -1) {
          var m = a.files[ri]
          var u = 'http://cdn.jsdelivr.net/' + lib + '/' + v + '/' + m
          console.log('Version: %s, Mainfile: %s, URL: %s', v, m, u)
          var o1 = { mainfile: m, version: v }
          getScript(u, function (err, s) {
            if (err) return cb(err)
            installedScripts.push(m)
            return cb(null, s, o1)
          })
        }
      })
    } else {
      var v = body[0].versions[0]
      var i = body[0].assets.findIndex(function (e, i, a) { if (e.version === v) { return true }; return false })
      var m = body[0].assets[i].mainfile
      var u = 'http://cdn.jsdelivr.net/' + lib + '/' + v + '/' + m
      console.log('Version: %s, Mainfile: %s, URL: %s', v, m, u)
      var o = { mainfile: m, version: v }
      getScript(u, function (err, s) {
        if (err) return cb(err)
        installedScripts.push(m)
        return cb(null, s, o)
      })
    }
  } else {
    var e = new Error('Library was not found.')
    return cb(e)
  }
}

function getUrls (lib, cb) {
  var baseUrl = 'http://api.jsdelivr.com/v1/jsdelivr/libraries/'
  if (typeof lib === 'string') {
    request(baseUrl + lib, function (err, res, body) {
      return handleRequest(lib, cb, err, res, body)
    })
  } else {
    lib.forEach(function (l) {
      request(baseUrl + l, function (err, res, body) {
        return handleRequest(l, cb, err, res, body)
      })
    })
  }
}

function createDocBlock (file) {
  var lines = [
    '/*',
    '* ' + file,
    '*',
    '* Created by ' + process.env.USER,
    '* May the force be with you.',
    '*/',
    '\n'
  ].join('\n')
  return lines
}

function createJSDir (lib, cb) {
  mkdirp(jsd, function (err) {
    if (err) return cb(err)
    console.log('Created JS directory!')
    var i = 0
    getUrls(lib, function (err, s, o) {
      i++
      if (err) return cb(err)
      async.parallel([
        function (callback) {
          if (typeof o.mainfile === 'string') {
            var p = path.join(jsd, o.mainfile)
            fs.writeFile(p, s, function (err) {
              if (err) return callback(err)
              callback()
            })
          } else {
            o.files.forEach(function (f, i) {
              var p = path.join(jsd, f)
              fs.writeFile(p, s[i], function (err) {
                if (err) return callback(err)
              })
            })
            callback()
          }
        }
      ], function (err) {
        if (err) return cb(err)
        if (i > lib.length - 1) {
          console.log('Created library main script file!')
          fs.writeFile(path.join(jsd, 'app.js'), createDocBlock('main.js'), function (err) {
            if (err) return cb(err)
            console.log('Created app main script file!')
            return cb(null)
          })
        }
      })
    })
  })
}

function createCSSDir (cb) {
  console.log('Created CSS directory!')
  mkdirp(cssd, function (err) {
    if (err) return cb(err)
    fs.writeFile(path.join(cssd, 'main.css'), createDocBlock('main.css'), function (err) {
      if (err) return cb(err)
      console.log('Created main CSS file!')
      return cb(null)
    })
  })
}

function createScriptHTMLTags (space) {
  var s = []
  for (var i in installedScripts) {
    var sc = installedScripts[i]
    if (!/\n/.test(sc)) {
      var line = space + '<script type="text/javascript" src="' + path.join('js', sc) + '"></script>'
      s.push(line)
    }
  }
  return s.join('\n')
}

function createMainHTMLContent (title) {
  var lines = [
    '<!DOCTYPE html>',
    '<html lang="en">',
    '  <head>',
    '    <meta charset="UTF-8" />',
    '    <title>' + title + '</title>',
    '  </head>',
    '  <body>',
    '    <!-- Start from here! -->',
    '    ',
    createScriptHTMLTags('    '),
    '  </body>',
    '</html>'
  ].join('\n')
  return lines
}

function createMainHTMLFile (cb) {
  fs.writeFile(path.join(p, 'index.html'), createMainHTMLContent(pTitle), function (err) {
    if (err) return cb(err)
    console.log('Created index.html file!')
    return cb(null)
  })
}

function createIMGDir (cb) {
  mkdirp(imgd, function (err) {
    if (err) return cb(err)
    console.log('Created img folder!')
    return cb(null)
  })
}

function frontEnd (lib, cb) {
  mkdirp(p, function (err) {
    if (err) return cb(err)
    console.log('Created project directory!')
    async.parallel([
      function (callback) {
        createJSDir(lib, function (err) {
          if (err) return callback(err)
          console.log('Finished JS initialization process!')
          createMainHTMLFile(function (err) { // This is done for adding the script tags to the index.html file
            if (err) return callback(err)
            console.log('Finished HTML initialization process!')
            return callback(null)
          })
        })
      },
      function (callback) {
        createCSSDir(function (err) {
          if (err) return callback(err)
          console.log('Finished CSS initialization process!')
          return callback(null)
        })
      },
      function (callback) {
        createIMGDir(function (err) {
          if (err) return callback(err)
          console.log('Finished creating the IMG folder!')
          return callback(null)
        })
      }
    ], function (err) {
      if (err) return cb(err)
      return cb(null)
    })
  })
}

function clientPrompt (cb) {
  inquirer.prompt([{
    type: 'checkbox',
    name: 'lib',
    message: 'What code libraries do you want to use in your project?',
    choices: [{
      name: 'AngularJS',
      value: 'angularjs'
    }, {
      name: 'Riot.js',
      value: 'riot'
    }, {
      name: 'jQuery',
      value: 'jquery'
    }, {
      name: 'React',
      value: 'react'
    }, {
      name: 'Ember.js',
      value: 'emberjs'
    }, {
      name: 'BackboneJS',
      value: 'backbonejs'
    }, {
      name: 'Knockout.js',
      value: 'knockout'
    }, {
      name: 'Vue.js',
      value: 'vue'
    }, {
      name: 'D3.js',
      value: 'd3js'
    }]
  }], function (answers) {
    frontEnd(answers.lib, function (err) {
      if (err) return cb(err)
      return cb(null)
    })
  })
}

function init () {
  if (process.argv[4]) {
    if (process.argv[4] === '-h' || process.argv[4] === '--help') {
      return printHelp()
    } else {
      return printHelp('Flag (' + process.argv[4].replace(/\-/g, '') + ') not found.')
    }
  } else {
    inquirer.prompt([{
      type: 'list',
      name: 'type',
      message: 'What\'s the type of your project?',
      choices: [
        'Server (comming soon)',
        'Client'
      ]
    }], function (answers) {
      if (answers.type === 'Client') {
        clientPrompt(function (err) {
          if (err) throw err
          console.log('Done! The new project is located in %s', p)
        })
      } else {
        console.log('Server project creation is not yet implemented... Sorry :(')
      }
    })
  }
}

init()
 at SyntaxError: Unexpected character '#' (1:78)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2756:10)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp.eat (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:536:12)
    at Parser.pp.semicolon (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:581:15)
    at Parser.pp$1.parseVarStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:918:10)
    at Parser.pp$1.parseStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:706:19)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
