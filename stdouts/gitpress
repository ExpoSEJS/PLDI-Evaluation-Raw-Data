/root/Targets/gitpress
└─┬ gitpress@0.3.3 
  ├── github@0.1.16 
  ├── highlight.js@7.5.0 
  ├─┬ http-proxy@0.10.4 
  │ ├── colors@0.6.2 
  │ ├─┬ optimist@0.6.1 
  │ │ ├── minimist@0.0.10 
  │ │ └── wordwrap@0.0.3 
  │ ├── pkginfo@0.3.1 
  │ └─┬ utile@0.2.1 
  │   ├── async@0.2.10 
  │   ├── deep-equal@1.0.1 
  │   ├── i@0.3.5 
  │   ├─┬ mkdirp@0.5.1 
  │   │ └── minimist@0.0.8 
  │   ├── ncp@0.4.2 
  │   └─┬ rimraf@2.6.2 
  │     └─┬ glob@7.1.2 
  │       ├── fs.realpath@1.0.0 
  │       ├─┬ inflight@1.0.6 
  │       │ └── wrappy@1.0.2 
  │       ├─┬ minimatch@3.0.4 
  │       │ └─┬ brace-expansion@1.1.8 
  │       │   ├── balanced-match@1.0.0 
  │       │   └── concat-map@0.0.1 
  │       ├── once@1.4.0 
  │       └── path-is-absolute@1.0.1 
  ├── marked@0.2.10 
  ├── mime@1.2.11 
  ├── node-mixin@1.0.0 
  ├─┬ rss@0.2.1 
  │ └── xml@0.0.12 
  ├─┬ thinkjs@0.1.29 
  │ ├── cookie@0.1.0 
  │ ├── ejs@0.8.4 
  │ ├─┬ multiparty@3.0.0 
  │ │ ├─┬ readable-stream@1.1.14 
  │ │ │ ├── core-util-is@1.0.2 
  │ │ │ ├── inherits@2.0.3 
  │ │ │ ├── isarray@0.0.1 
  │ │ │ └── string_decoder@0.10.31 
  │ │ └── stream-counter@0.2.0 
  │ └─┬ mysql@2.0.0-alpha9 
  │   ├── bignumber.js@1.0.1 
  │   └── require-all@0.0.3 
  └── when@2.5.1 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/gitpress/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 38% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log","parse"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0627 took 4.0737s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Invalid number (219:28) on program var fs = require("fs");
var path = require("path");
var util = require("util");
var crypto = require("crypto");

//由于框架非常依赖promise，将when置为全局变量
global.when = require("when");
/**
 * 动态创建一个类
 * 提供了继承、扩展、调用父级别方法等方法
 * @return {[type]} [description]
 */
global.Class = function (prop) {    
    var cls = function () {        
        function T(args) {
            if(typeof this.init == 'function'){
                this.__initReturn = this.init.apply(this, args);
            }            
            return this;   
        }        
        var _t = arguments.callee;
        T.prototype = _t.prototype;           
        T.constructor = _t;            
        return new T(arguments);     
    };        
    cls.extend = function(pro){
        extend(this.prototype, pro);
        return this;
    };
    cls.inherits = function(superCls){
        util.inherits(this, superCls);
        return this;
    }
    //调用父级方法
    cls.prototype.super = function(name, data){
       var method = this.constructor.super_.prototype[name];
       if (!method) {
            return false;
       };
       if (!is_array(data)) {
            data = [data];
       };
       //先删除父级的方法，防止循环引用
       delete this.constructor.super_.prototype[name];
       var ret = method.apply(this, data);
       this.constructor.super_.prototype[name] = method;
       return ret;
    }
    if (typeof prop == 'function') {
        prop = prop();
    };
    prop = prop || {};
    for(var name in prop){
        cls.prototype[name] = prop[name];
    }
    return cls;
}
/**
 * extend
 * @return {[type]} [description]
 */
global.extend = function(origin, add){
    if (typeof add == 'function') {
        add = add();
    };
    return util._extend(origin || {}, add);
};
/**
 * 是否是boolean
 * @param  {[type]}  obj
 * @return {Boolean}
 */
global.is_boolean = function(obj){
    return obj === true || obj === false;
}
//Object上toString方法
var toString = Object.prototype.toString;
/**
 * 是否是数字
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_number = function(obj){
    return toString.call(obj) === '[object Number]';
}
/**
 * 是否是个对象
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_object = function(obj){
    return toString.call(obj) === '[object Object]';
}
/**
 * 是否是字符串
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_string = function(obj){
    return toString.call(obj) === '[object String]';
}
/**
 * 是否是日期
 * @return {Boolean} [description]
 */
global.is_date = function(obj){
    return toString.call(obj) === '[object Date]';
}
/**
 * 是否是正则
 * @param  {[type]}  reg [description]
 * @return {Boolean}     [description]
 */
global.is_regexp = function(obj){
    return toString.call(obj) === '[object RegExp]';
}
/**
 * 是否是个错误
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_error = function(obj){
    return toString.call(obj) === '[object Error]';
}
/**
 * 判断对象是否为空
 * @param  {[type]}  obj
 * @return {Boolean}
 */
global.is_empty = function(obj){
    if (is_object(obj)) {
        return Object.keys(obj).length === 0;
    }else if (is_array(obj)) {
        return obj.length === 0;
    }else if (is_string(obj)) {
        return obj.length === 0;
    }else if (is_number(obj)) {
        return obj === 0;
    }else if (obj === null || obj === undefined) {
        return true;
    }else if (is_boolean(obj)) {
        return !obj;
    };
    return false;
}
/**
 * 是否是个标量
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_scalar = function(obj){
    return is_boolean(obj) || is_number(obj) || is_string(obj);
}
/**
 * 是否是个数组
 * @type {Boolean}
 */
global.is_array = Array.isArray;
/**
 * 是否是个文件
 * @param  {[type]}  p [description]
 * @return {Boolean}   [description]
 */
global.is_file = function(p){
    if (!fs.existsSync(p)) {
        return false;
    };
    var stats = fs.statSync(p);
    return stats.isFile();
}
/**
 * 是否是个目录
 * @param  {[type]}  p [description]
 * @return {Boolean}   [description]
 */
global.is_dir = function(p){
    if (!fs.existsSync(p)) {
        return false;
    };
    var stats = fs.statSync(p);
    return stats.isDirectory();
}
/**
 * 是否是个数字的字符串
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_number_string = function(obj){
    var parseValue = parseFloat(obj);
    if (isNaN(parseValue)) {
        return false;
    };
    return (parseValue + "").length == (obj + "").length
}
/**
 * 判断是否是个promise
 * @param  {[type]}  obj [description]
 * @return {Boolean}     [description]
 */
global.is_promise = function(obj){
    return when.isPromise(obj);
}

/**
 * 判断一个文件或者目录是否可写
 * @param  {[type]}  p [description]
 * @return {Boolean}      [description]
 */
global.is_writable = function(p){
    if (!fs.existsSync(p)) {
        return false;
    };
    var stats = fs.statSync(p);
    var mode = stats.mode;
    var uid = process.getuid ? process.getuid() : 0;
    var gid = process.getgid ? process.getgid() : 0;
    var owner = uid == stats.uid;
    var group = gid == stats.gid;
    return owner && (mode & 00200) || // User is owner and owner can write.
            group && (mode & 00020) || // User is in group and group can write.
         (mode & 00002); // Anyone can write.
}

/**
 * 递归创建目录，同步模式
 * @param  {[type]} p    [description]
 * @param  {[type]} mode [description]
 * @return {[type]}      [description]
 */
global.mkdir = function(p, mode){
    mode = mode || 0777;
    if (fs.existsSync(p)) {
        return true;
    };
    var pp = path.dirname(p);
    if (fs.existsSync(pp)) {
        fs.mkdirSync(p, mode);
    }else{
        mkdir(pp, mode);
        mkdir(p, mode);
    }
    return true;
}
/**
 * 修改目录或者文件权限
 * @param  {[type]} p    [description]
 * @param  {[type]} mode [description]
 * @return {[type]}      [description]
 */
global.chmod = function(p, mode){
    mode = mode || 0777;
    if (fs.existsSync(p)) {
        return true;
    };
    return fs.chmodSync(p, mode);
}
/**
 * 获取文件相关信息
 * @param  {[type]} file [description]
 * @return {[type]}      [description]
 */
global.file_state = function(file){
    if (!fs.existsSync(file)) {
        return false;
    };
    return fs.statSync(file);
}
/**
 * 获取文件内容
 * @param  {[type]} file [description]
 * @return {[type]}      [description]
 */
global.file_get_contents = function(file){
    if (!fs.existsSync(file)) {
        return '';
    };
    var encoding = C("encoding") || "utf8";
    return fs.readFileSync(file, encoding);
}
/**
 * 设置文件内容
 * @param  {[type]} file [description]
 * @param  {[type]} data [description]
 * @return {[type]}      [description]
 */
global.file_put_contents = function(file, data){
    return fs.writeFileSync(file, data);
}
/**
 * 大写首字符
 * @param  {[type]} name [description]
 * @return {[type]}      [description]
 */
global.ucfirst = function(name){
    name = name || "";
    return name.substr(0,1).toUpperCase() + name.substr(1).toLowerCase();
}
/**
 * 抛出一个错误
 * @param  {[type]} obj [description]
 * @return {[type]}     [description]
 */
global.throw_error = function(obj, http){
    if (is_string(obj)) {
        obj = {msg: obj};
    };
    obj = extend({
        type: "error",
        msg: "",
        http: http
    }, obj);
    if (http) {
        throw obj;
    };
    throw new Error(JSON.stringify(obj));
}
/**
 * 获取字符串的md5
 * @param  {[type]} str [description]
 * @return {[type]}     [description]
 */
global.md5 = function(str){
    var instance = crypto.createHash('md5');
    instance.update(str);
    return instance.digest('hex');
}
/**
 * 字符串命名风格转换
 * @param  {[type]} name [description]
 * @param  {[type]} type [description]
 * @return {[type]}      [description]
 */
global.parse_name = function(name, type){
    name = (name + "").trim();
    if (type == 1) {
        name = name.replace(/_([a-zA-Z])/g, function(a, b){
            return b.toUpperCase();
        });
        return name.substr(0, 1).toUpperCase() + name.substr(1);
    } else {
        //首字母如果是大写，不转义为_x
        if (name.length >= 1) {
            name = name.substr(0, 1).toLowerCase() + name.substr(1);
        };
        return name.replace(/[A-Z]/g, function(a){
            return "_" + a;
        }).toLowerCase();
    }
}
/**
 * 生成一个promise,如果传入的参数是promise则直接返回
 * @param  {[type]} obj [description]
 * @return {[type]}     [description]
 */
global.get_promise = function(obj){
    if (when.isPromise(obj)) {
        return obj;
    };
    var deferred = when.defer();
    //process.nextTick(function(){
    deferred.resolve(obj);
    //});
    return deferred.promise;
}
 at SyntaxError: Invalid number (219:28)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.readNumber (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2896:52)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2720:19)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp$3.parseExprOp (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1654:14)
    at Parser.pp$3.parseExprOps (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1639:17)
    at Parser.pp$3.parseMaybeConditional (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1620:21)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- File /root/Targets/gitpress/node_modules/gitpress/www/index.js. Coverage (Term): 87% Coverage (LOC): 100%
*- File /root/Targets/gitpress/node_modules/thinkjs/index.js. Coverage (Term): 80% Coverage (LOC): 100%
*- File /root/Targets/gitpress/node_modules/thinkjs/lib/think.js. Coverage (Term): 79% Coverage (LOC): 86%
*- File /root/Targets/gitpress/node_modules/thinkjs/lib/Common/runtime.js. Coverage (Term): 32% Coverage (LOC): 35%
*- File /root/Targets/gitpress/node_modules/thinkjs/lib/Common/extend.js. Coverage (Term): 30% Coverage (LOC): 43%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
