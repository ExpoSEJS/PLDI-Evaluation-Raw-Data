/root/Targets/weex-tabbar
└─┬ weex-tabbar@1.1.1 
  └── weex-components@0.2.0 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/weex-tabbar/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0602 took 5.0466s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Unexpected token (1:78) on program <!-- tabbar.we -->
<template>
	<div class="tabbar" id="tabbar" style="transform-origin:{{transformOrigin}};height:{{tabbarHeight}};background-color:rgba(255, 255, 255,{{bgopacity}})">
		<div class="tabs" ref="{{$index}}" onclick="switchPage" repeat="tabs">
			<image class="img" if="{{selected!==$index}}" style="left:{{imgleft}}" src="{{image}}"></image>
			<image class="img" if="{{selected===$index}}" style="left:{{imgleft}}" src="{{selectedImage}}"></image>
			<text class="text" style="color:{{selected===$index?activeTitleColor:defaultTitleColor}}">{{title}}</text>
			<text class="number" style="background-color:{{labelColor}}" id="{{labelName}}" if="{{haslabel}}">{{label}}</text>
		</div>
	</div>
</template>

<style>
.tabbar{
	flex-direction: row;
	position: fixed;
	bottom:0;
	left:0;
	text-align: center;
	border-top:1px solid rgb(197, 197, 197);
	z-index: 10;
	width: 750;
}
.tabs{
	position: relative;
	flex:1;
	text-align: center;
	flex-direction: column;
	bottom:0;
}
.img{
	width:50;
	height:50;
	left:70;
	margin-top:10;
	position: relative;
	text-align: center;
}
.text{
	font-size:26;
	text-align: center;
	margin-top:5;
}
.number{
	position: absolute;
	bottom:55;
	right:30;
	color:#fff;
	border-radius: 20;
	width:40;
	height: 40;
	line-height: 40;
	font-size:28;
	text-align: center;
}
</style>

<script>
let animation = require('@weex-module/animation');
require('weex-components');

module.exports = {
	data: {
		tabs:[],
		selected:0,//默认选中的tab
		tabbarHeight:"100",//tabbar高度
		imgleft:70,//默认四个tab的话就是70
		bgopacity:"1",
		labelColor:"#db3652",
		transformOrigin:"center center",
		current_translate:"show",
		controlAnim:0,//控制动画
	},
	created(){
		// 设置样式,支持3到5个tab
		if(this.tabs.length>4){
			this.imgleft = 50+(5-this.tabs.length)*30;
		}
		else{
			this.imgleft = 40+(5-this.tabs.length)*30;
		}

		// 接收父组件消息
		this.$on("tabbarAccept",(e)=>{
			this.executeMessage({
				target:e.detail.target,
				action:e.detail.action,
				value:e.detail.value,
			})
		});

		// 显示tabbar
		this.$on("tabbarState",(e)=>{
			if(e.detail.state==="show"){
				this.tabbarShow();
			}
			else{
				// 隐藏tabbar
				this.tabbarHide();
			}
			
		});
	},
	ready(){
		
	},
	methods: {
		switchPage(event){
			let index = event.target.attr.ref;
			this.$dispatch("switchPage",{
				page:index
			});
			this.onselected = index;
		},
		// 执行动画
		anim(styles,timingFunction,duration,callback){
			animation.transition(this._ids.tabbar.el.ref,{
				styles:styles,
				timingFunction:timingFunction,
				duration:duration
			},callback);
		},
		// 显示tabbar
		tabbarShow(){
			// 如果之前的是show
			if(this.current_translate==="show"||this.controlAnim===1){
				return;
			}
			
			this.controlAnim = 1;//锁住动画
			this.current_translate ='translate(0, 0)';
			// 执行动画
			this.anim({
				transform:this.current_translate
			},"ease-in",300,()=>{
				// 记录这次操作为show
				this.current_translate = "show";
				this.controlAnim = 0;//放开动画控制
				// this.tabbarHeight = "100";
			});
		},
		// 隐藏tabbar
		tabbarHide(){
			// 如果之前的是show
			if(this.current_translate==="hide"||this.controlAnim===1){
				return;
			}

			this.controlAnim = 1;//锁住动画
			this.current_translate = 'translate(0, 100%)';
			// 执行动画
			this.anim({
				transform:this.current_translate
			},"ease-out",300,()=>{
				// 记录这次操作为show
				this.current_translate = "hide";
				this.controlAnim = 0;//放开动画控制
				// this.tabbarHeight = "0";
			});
		},
		// 执行动作
		executeMessage(message){
			switch(message.action){
				case "add":
					// 自加
					this.$vm(message.target).label++;
					break;
				case "minus":
					// 自减
					this.$vm(message.target).label--;
					break;
				case "set":
					// 手动设置值
					this.$vm(message.target).label = message.value;
			}
		}
	}
}
</script>

 at SyntaxError: Unexpected token (1:78)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp.unexpected (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:603:10)
    at Parser.pp$3.parseExprAtom (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1822:12)
    at Parser.parseExprAtom (/root/ExpoSE/lib/Tropigate/bin/Expression.js:28:30)
    at Parser.pp$3.parseExprSubscripts (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1715:21)
    at Parser.parseMaybeUnary (/root/ExpoSE/lib/Tropigate/bin/Unary.js:34:29)
    at Parser.pp$3.parseExprOps (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1637:21)
    at Parser.pp$3.parseMaybeConditional (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1620:21)
    at Parser.pp$3.parseMaybeAssign (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1597:21)
    at Parser.pp$3.parseExpression (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:1573:21)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- File /root/Targets/weex-tabbar/node_modules/weex-tabbar/index.js. Coverage (Term): 83% Coverage (LOC): 100%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
