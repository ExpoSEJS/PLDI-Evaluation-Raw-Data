/root/Targets/ria-packager
└── ria-packager@2.2.10 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/ria-packager/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0801 took 6.3274s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Unexpected character '#' (1:78) on program #!/usr/bin/env node

var fs = require('fs');
var path = require('path');
var mkdirp = require('mkdirp');
var log = require('./lib/tools/log');
var walk = require('./lib/tools/dirWalker');

var pkgJs = require('./lib/js/combineAll');
var pkgCss = require('./lib/css/combineAll');
var pkgLess = require('./lib/less/combineAll');

var cpf = require('./lib/tools/cpFile');
var writeMappingFile = require('./lib/tools/md5').writeMappingFile;

var conf = require("argsparser").parse();

function release(conf){
    function showUsage() {
        //default will rewrite static file(.js, .css, img)'s name 
        //but does't rewrite .html file name.
        console.error('Usage: node index.js -from fromDir -to toDir  [-verbose or -v] ' + 
                      ' [-noRewriteFileName]');
        process.exit(1);
    }

    var from = conf['-from'];
    var to = conf['-to'];

    if (!from || !fs.existsSync(from)) {
        console.log('need fromDir');
        showUsage();
    }
    from = path.join(path.resolve(from), path.sep);

    if (!conf['-root']) {
        conf['-root'] = from;
    }

    if (!to || !fs.existsSync(to)) {
        console.log('need toDir');
        showUsage();
    }
    to = path.join(path.resolve(to), path.sep);

    publish(conf,from,to);
}
function publish(conf,from,to) {
    console.time('Package-Time');

    //获得打包路径的列表
    console.log('Please wait...\n');

    var files = walk(from),
        jsList = files.js,
        cssList = files.css,
        lessList = files.less,
        htmlList = files.html,
        otherFiles = files.other;

    //1. 先把目标目录建立好
    var target;
    jsList.concat(cssList).concat(lessList).concat(htmlList).concat(otherFiles).forEach(function(uri) {
        target = uri.replace(from, to);
        if (!fs.existsSync(path.dirname(target))) {
            mkdirp.sync(path.dirname(target), 0777);
        }
    });

    //2. 复制非js,css,less文件(swf,图片等静态资源,同时计算其md5)
    otherFiles.forEach(function(source) {
        cpf(source, source.replace(from, to), from, conf);
    });

    //3.压缩,合并css
    pkgCss(from, to, cssList,conf);

    //4. 压缩,合并js
    pkgJs(from, to, jsList, conf);

    //5. parse,combine .less
    pkgLess(from, to, lessList, conf);

    //6 write md5Mapping.json
    writeMappingFile(from, to);

    //7 copy .html file,and replace the md5 version num.
    htmlList.forEach(function(source) {
        cpf(source, source.replace(from, to), from);
    });

    console.log('######## Package SUCCESS! ###########');
    console.timeEnd('Package-Time');
}

module.exports = release;
if(conf.node === __filename){
	release(conf);
    process.exit(0);
} at SyntaxError: Unexpected character '#' (1:78)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2756:10)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp.eat (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:536:12)
    at Parser.pp.semicolon (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:581:15)
    at Parser.pp$1.parseVarStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:918:10)
    at Parser.pp$1.parseStatement (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:706:19)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
