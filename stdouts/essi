/root/Targets/essi
└─┬ essi@0.11.10 
  ├── fetch-agent@0.4.5 
  ├── iconv-lite@0.4.19 
  ├── ip@1.1.5 
  ├── is-utf8@0.2.1 
  ├─┬ js-beautify@1.5.10 
  │ ├─┬ config-chain@1.1.11 
  │ │ ├── ini@1.3.4 
  │ │ └── proto-list@1.2.4 
  │ └─┬ nopt@3.0.6 
  │   └── abbrev@1.1.1 
  ├─┬ juicer@0.6.15 
  │ ├─┬ optimist@0.3.7 
  │ │ └── wordwrap@0.0.3 
  │ └── uglify-js@1.2.6 
  ├── merge@1.2.0 
  ├─┬ minimatch@3.0.4 
  │ └─┬ brace-expansion@1.1.8 
  │   ├── balanced-match@1.0.0 
  │   └── concat-map@0.0.1 
  ├─┬ mkdirp@0.5.1 
  │ └── minimist@0.0.8 
  ├── node-forge@0.6.49 
  ├─┬ plug-trace@0.1.5 
  │ └─┬ chalk@1.1.3 
  │   ├── ansi-styles@2.2.1 
  │   ├── escape-string-regexp@1.0.5 
  │   ├─┬ has-ansi@2.0.0 
  │   │ └── ansi-regex@2.1.1 
  │   ├── strip-ansi@3.0.1 
  │   └── supports-color@2.0.0 
  ├─┬ through2@0.6.5 
  │ ├─┬ readable-stream@1.0.34 
  │ │ ├── core-util-is@1.0.2 
  │ │ ├── inherits@2.0.3 
  │ │ ├── isarray@0.0.1 
  │ │ └── string_decoder@0.10.31 
  │ └── xtend@4.0.1 
  └─┬ velocity@0.7.2 
    ├── colorful@2.1.0 
    ├── commander@2.3.0 
    ├─┬ tracer@0.7.4 
    │ ├── colors@1.0.3 
    │ ├─┬ dateformat@1.0.11 
    │ │ ├── get-stdin@5.0.1 
    │ │ └─┬ meow@3.7.0 
    │ │   ├─┬ camelcase-keys@2.1.0 
    │ │   │ └── camelcase@2.1.1 
    │ │   ├── decamelize@1.2.0 
    │ │   ├─┬ loud-rejection@1.6.0 
    │ │   │ ├─┬ currently-unhandled@0.4.1 
    │ │   │ │ └── array-find-index@1.0.2 
    │ │   │ └── signal-exit@3.0.2 
    │ │   ├── map-obj@1.0.1 
    │ │   ├── minimist@1.2.0 
    │ │   ├─┬ normalize-package-data@2.4.0 
    │ │   │ ├── hosted-git-info@2.5.0 
    │ │   │ ├─┬ is-builtin-module@1.0.0 
    │ │   │ │ └── builtin-modules@1.1.1 
    │ │   │ ├── semver@5.4.1 
    │ │   │ └─┬ validate-npm-package-license@3.0.1 
    │ │   │   ├─┬ spdx-correct@1.0.2 
    │ │   │   │ └── spdx-license-ids@1.2.2 
    │ │   │   └── spdx-expression-parse@1.0.4 
    │ │   ├── object-assign@4.1.1 
    │ │   ├─┬ read-pkg-up@1.0.1 
    │ │   │ ├─┬ find-up@1.1.2 
    │ │   │ │ ├── path-exists@2.1.0 
    │ │   │ │ └─┬ pinkie-promise@2.0.1 
    │ │   │ │   └── pinkie@2.0.4 
    │ │   │ └─┬ read-pkg@1.1.0 
    │ │   │   ├─┬ load-json-file@1.1.0 
    │ │   │   │ ├── graceful-fs@4.1.11 
    │ │   │   │ ├─┬ parse-json@2.2.0 
    │ │   │   │ │ └─┬ error-ex@1.3.1 
    │ │   │   │ │   └── is-arrayish@0.2.1 
    │ │   │   │ ├── pify@2.3.0 
    │ │   │   │ └── strip-bom@2.0.0 
    │ │   │   └── path-type@1.1.0 
    │ │   ├─┬ redent@1.0.0 
    │ │   │ ├─┬ indent-string@2.1.0 
    │ │   │ │ └─┬ repeating@2.0.1 
    │ │   │ │   └─┬ is-finite@1.0.2 
    │ │   │ │     └── number-is-nan@1.0.1 
    │ │   │ └─┬ strip-indent@1.0.1 
    │ │   │   └── get-stdin@4.0.1 
    │ │   └── trim-newlines@1.0.0 
    │ └── tinytim@0.1.1 
    └─┬ utilx@0.0.5 
      └── iconv-lite@0.2.11 

Setup Done exists, not setting up
:../FeatureTester/libs/:/root/Targets/essi/node_modules
Set Default Z3_PATH to ./node_modules/z3javascript/bin/libz3.so
ExpoSE Master: /root/ExpoSE/lib/Harness/src/harness.js max concurrent: 16 max paths: 1000000
Setting timeout to 900000
*** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [0 done /0 queued / 1 running / 0 errors / 0% coverage ] ****** [1 done /0 queued / 0 running / 1 errors / 33% coverage ] ***
*-- Stat Module Output --*
*-- concretizations: ["defineProperty","bound log"]
*-- Stat Module Done --*
*-- Test Case {"_bound":0} start 0.0466 took 3.1948s
*-- Errors occured in test {"_bound":0}
* Error: Tropigate failed because SyntaxError: Invalid number (34:27) on program /**
 * 主入口
 * 通过require("essi")
 * */
var ESSI = require("./api");
var trace = require("plug-trace");

var pkg = require(__dirname + "/package.json");

function init_config(dir) {
  var pathLib = require("path");
  var fsLib = require("fs");
  var mkdirp = require("mkdirp");

  if (dir) {
    var confDir, confFile, json = pkg.name + ".json";
    if (dir.indexOf('/') == 0 || /^\w{1}:[\\/].*$/.test(dir)) {
      if (/\.json$/.test(dir)) {
        confFile = dir;
        confDir = pathLib.dirname(confFile);
      }
      else {
        confDir = dir;
        confFile = pathLib.join(confDir, json);
      }
    }
    else {
      confDir = pathLib.join(process.cwd(), dir);
      confFile = pathLib.join(confDir, json);
    }

    if (!fsLib.existsSync(confDir)) {
      mkdirp.sync(confDir);
      fsLib.chmod(confDir, 0777);
    }

    return confFile;
  }
  else {
    return null;
  }
}

exports = module.exports = function (param, dir) {
  var confFile = init_config(dir);
  var urlLib = require("url");

  process.on(pkg.name, function (data) {
    console.log("\n=== Served by %s ===", trace.chalk.white(pkg.name));
    trace(data);
  });

  return function (req, res, next) {
    try {
      if (req && res && next) {
        var result = urlLib.parse(req.url);
        if (/\.vm$|\.htm$|\.html$/.test(result.pathname)) {
          var essiInst = new ESSI(param, confFile);
          essiInst.handle(req, res, next);
        }
        else {
          next();
        }
      }
      else {
        console.log("arguments error!");
      }
    }
    catch (e) {
      console.log(e);
    }
  }
};

exports.name = pkg.name;
exports.config = require("./lib/param");
exports.gulp = function (param, dir) {
  var through = require("through2");
  var merge = require("merge");
  var Helper = require("./lib/helper");
  var confFile = init_config(dir);

  process
    .removeAllListeners(pkg.name)
    .on(pkg.name, function (data) {
      trace(data, "error");
    });

  return through.obj(function (file, enc, cb) {
    var essiInst = new ESSI(param, confFile);

    param = merge.recursive(true, essiInst.param, param);

    var self = this;

    if (file.isNull()) {
      self.emit("error", "isNull");
      cb(null, file);
      return;
    }

    if (file.isStream()) {
      self.emit("error", "Streaming not supported");
      cb(null, file);
      return;
    }

    essiInst.compile(
      file.path,
      file.contents,
      function (err, str) {
        if (!param.strictPage || /<html[^>]*?>([\s\S]*?)<\/html>/gi.test(str)) {
          file.contents = Helper.encode(str, param.charset);
          self.push(file);
          cb();
        }
        else {
          return cb();
        }
      }
    );
  });
};
exports.engine = exports.gulp; at SyntaxError: Invalid number (34:27)
    at Parser.pp$4.raise (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2221:15)
    at Parser.pp$7.readNumber (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2896:52)
    at Parser.pp$7.getTokenFromCode (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2720:19)
    at Parser.pp$7.readToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2477:17)
    at Parser.readToken (/root/ExpoSE/lib/Tropigate/bin/Tokens.js:124:26)
    at Parser.pp$7.nextToken (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2468:15)
    at Parser.pp$7.next (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2413:10)
    at Parser.pp.eat (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:536:12)
    at Parser.pp.expect (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:597:10)
    at Parser.pp$3.parseExprList (/root/ExpoSE/lib/Tropigate/node_modules/acorn/dist/acorn.js:2152:16)
*-- Replay with NO_COMPILE=1 expoSE replay '/root/ExpoSE/lib/Harness/src/harness.js' '{"_bound":0}'
*-- Coverage Data
*- File /root/ExpoSE/lib/Harness/src/harness.js. Coverage (Term): 18% Coverage (LOC): 24%
*- File /root/ExpoSE/lib/S$/bin/symbols.js. Coverage (Term): 16% Coverage (LOC): 34%
*- Re-run with EXPOSE_PRINT_COVERAGE=1 to print line by line coverage information
** ExpoSE Finished. 1 paths with 1 errors **
